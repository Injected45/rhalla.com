import{g as T,y as j,H as I,x as O,k as C,l as f,c as r,a as l,q as g,d as p,b as F,w as D,m as R,s as m,v as _,j as t,G as z,n as y,F as x,t as S,i as L,o as d,_ as W}from"./av1iKabt.js";import{_ as A}from"./Bu1Nlgep.js";import{u as G}from"./Q21s4gSx.js";const H={class:"booking-page"},J={class:"container"},K={class:"page-header"},Q={class:"bank-logo-wrapper"},X={class:"bank-logo-container"},Y=["src"],Z={class:"form-card"},ss={class:"form-section"},ls={class:"form-row"},ts={class:"form-group"},ns={class:"form-group"},os={class:"form-row"},as={class:"form-group"},is={class:"form-group"},es={class:"form-row"},rs={class:"form-group"},ds={class:"form-group"},ps={class:"form-section"},us={class:"file-grid"},fs={class:"form-group"},ms={for:"passport_photo",class:"file-label"},cs={key:1,class:"pdf-preview"},vs=["src"],bs={class:"form-group"},gs={for:"voucher_photo",class:"file-label"},_s={key:1,class:"pdf-preview"},ys=["src"],ks={class:"form-group"},ws={for:"national_id_photo",class:"file-label"},qs={key:1,class:"pdf-preview"},xs=["src"],Cs={class:"form-group"},Fs={for:"additional_photo",class:"file-label"},Ds={key:1,class:"pdf-preview"},hs=["src"],Ps={class:"submit-wrapper"},Ss=["disabled"],Vs={key:0,class:"modal-overlay show"},Bs={class:"modal"},Ms={class:"modal-body success-body"},Ns={class:"tracking-code-display"},Us={class:"success-actions"},$s=T({__name:"index",setup(Es){j({title:"حجز بطاقة أغراض شخصية | شركة الرحالة",description:"خدمة حجز بطاقات الأغراض الشخصية للمواطنين عبر شركة الرحالة للصرافة"});const{isDark:V}=I(),{success:B,error:c}=G(),M=O().public.apiBase,a=C({name:"",phone:"",national_id:"",payment_type:"",account_number:"",booking_amount:""}),e=C({passport:null,voucher:null,national_id:null,additional:null}),i=C({passport:"",voucher:"",national_id:"",additional:""}),v=f(!1);f(""),f(!1);const N=f(["","","",""]);f([]),f(""),f(!1);const h=f(!1),P=f(""),k=(n,s)=>{const u=n.target.files?.[0];if(u&&(u.type.startsWith("image/")||u.type==="application/pdf")){if(u.size>10*1024*1024){c("حجم الملف يجب أن يكون أقل من 10MB");return}if(e[s]=u,u.type.startsWith("image/")){const o=new FileReader;o.onload=E=>{i[s]=E.target?.result},o.readAsDataURL(u)}else i[s]="pdf"}},w=n=>e[n]?.type==="application/pdf",q=n=>{e[n]=null,i[n]="";const s=document.getElementById(`${n}_photo`);s&&(s.value="")},U=async()=>{if(!e.passport||!e.voucher||!e.national_id){c("يرجى رفع المستندات الأساسية المطلوبة");return}if(Number(a.booking_amount)>2e3){c("قيمة الحجز لا يمكن أن تتجاوز 2000 دولار");return}v.value=!0;try{const n=new FormData;n.append("name",a.name),n.append("phone",a.phone),n.append("national_id",a.national_id),n.append("payment_type",a.payment_type.toString()),n.append("account_number",a.account_number),n.append("booking_amount",a.booking_amount),e.passport&&n.append("passport_photo",e.passport),e.voucher&&n.append("voucher_photo",e.voucher),e.national_id&&n.append("national_id_photo",e.national_id),e.additional&&n.append("additional_photo",e.additional);const s=await $fetch(`${M}/booking-cards/store`,{method:"POST",body:n});s.success&&(P.value=s.tracking_code,h.value=!0,B("تم تقديم طلب حجز البطاقة بنجاح"),$())}catch(n){if(console.error("Step 1 failed:",n.data||n),n.data?.errors){const s=Object.values(n.data.errors).flat().join(`
`);c(s)}else c(n.data?.message||"حدث خطأ أثناء إرسال البيانات")}finally{v.value=!1}},$=()=>{a.name="",a.phone="",a.national_id="",a.payment_type="",a.account_number="",a.booking_amount="",e.passport=null,e.voucher=null,e.national_id=null,e.additional=null,i.passport="",i.voucher="",i.national_id="",i.additional="",N.value=["","","",""],["passport_photo","voucher_photo","national_id_photo","additional_photo"].forEach(s=>{const b=document.getElementById(s);b&&(b.value="")})};return(n,s)=>{const b=L,u=A;return d(),r("div",H,[l("div",J,[l("div",K,[s[15]||(s[15]=l("div",{class:"header-badge"},[l("i",{class:"fas fa-id-card"}),l("span",null,"شركة الرحالة للصرافة والخدمات المالية")],-1)),s[16]||(s[16]=l("h1",{class:"page-title"},[p("منصة الرحالة "),l("span",{class:"gradient-text"},"للصرافة مخصصه لزبائن المصرف التجاري الوطني")],-1)),l("div",Q,[F(b,null,{default:D(()=>[l("div",X,[l("img",{src:t(V)?"/images/ncb-dark.png":"/images/ncb-light.png",alt:"National Commercial Bank",class:"bank-logo"},null,8,Y),s[14]||(s[14]=l("div",{class:"logo-shimmer"},null,-1))])]),_:1})])]),l("div",Z,[l("form",{onSubmit:R(U,["prevent"])},[s[47]||(s[47]=l("div",{class:"status-alert warning"},[l("i",{class:"fas fa-university"}),l("span",null,[p("يطلب تحويل مايعادل قيمة حجز البطاقة بالدينار الي حساب شركة الرحالة للصرافة رقم : "),l("strong",null,"122012276814011")])],-1)),l("div",ss,[s[24]||(s[24]=l("h3",{class:"section-title"},[l("i",{class:"fas fa-user-edit"}),l("span",null,"المعلومات الشخصية")],-1)),l("div",ls,[l("div",ts,[s[17]||(s[17]=l("label",{class:"label"},[p("الإسم بالكامل "),l("span",{class:"required"},"*")],-1)),m(l("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t(a).name=o),type:"text",class:"input",placeholder:"أدخل اسمك كما هو في الجواز",required:""},null,512),[[_,t(a).name]])]),l("div",ns,[s[18]||(s[18]=l("label",{class:"label"},[p("الرقم الوطني (12 رقم) "),l("span",{class:"required"},"*")],-1)),m(l("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t(a).national_id=o),type:"text",class:"input",maxlength:"12",inputmode:"numeric",pattern:"[0-9]{12}",placeholder:"مثال: 119900123456",required:""},null,512),[[_,t(a).national_id]])])]),l("div",os,[l("div",as,[s[19]||(s[19]=l("label",{class:"label"},[p("رقم الهاتف "),l("span",{class:"required"},"*")],-1)),m(l("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t(a).phone=o),type:"tel",class:"input",placeholder:"مثال: 0912345678",required:""},null,512),[[_,t(a).phone]])]),l("div",is,[s[21]||(s[21]=l("label",{class:"label"},[p("نوع الدفع "),l("span",{class:"required"},"*")],-1)),m(l("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>t(a).payment_type=o),class:"input select-input",required:""},[...s[20]||(s[20]=[l("option",{value:"",disabled:"",selected:""},"اختر نوع الدفع",-1),l("option",{value:0},"نقدي",-1),l("option",{value:1},"مصرف",-1)])],512),[[z,t(a).payment_type]])])]),l("div",es,[l("div",rs,[s[22]||(s[22]=l("label",{class:"label"},[p("رقم الحساب "),l("span",{class:"required"},"*")],-1)),m(l("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>t(a).account_number=o),type:"text",class:"input",inputmode:"numeric",placeholder:"أدخل رقم الحساب الجاري",required:""},null,512),[[_,t(a).account_number]])]),l("div",ds,[s[23]||(s[23]=l("label",{class:"label"},[p("قيمة الحجز بالدولار "),l("span",{class:"required"},"*")],-1)),m(l("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>t(a).booking_amount=o),type:"number",step:"0.01",class:"input",placeholder:"مثال: 100",required:""},null,512),[[_,t(a).booking_amount]])])])]),s[48]||(s[48]=l("hr",{class:"divider"},null,-1)),l("div",ps,[s[45]||(s[45]=l("h3",{class:"section-title"},[l("i",{class:"fas fa-file-invoice"}),l("span",null,"المستندات المطلوبة")],-1)),s[46]||(s[46]=l("div",{class:"status-alert warning",style:{"margin-bottom":"25px"}},[l("i",{class:"fas fa-info-circle"}),l("span",null,"يرجى ملء البيانات بدقة ورفع المستندات المطلوبة (صور أو PDF بحد أقصى 10 ميجا)")],-1)),l("div",us,[l("div",fs,[s[29]||(s[29]=l("label",{class:"label"},[p("صورة جواز السفر "),l("span",{class:"required"},"*")],-1)),l("div",{class:y(["file-wrapper",{"has-file":t(i).passport}])},[l("input",{type:"file",id:"passport_photo",class:"file-input",onChange:s[6]||(s[6]=o=>k(o,"passport")),accept:"image/*,.pdf",required:""},null,32),l("label",ms,[t(i).passport?w("passport")?(d(),r("div",cs,[...s[27]||(s[27]=[l("i",{class:"fas fa-file-pdf"},null,-1),l("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:t(i).passport,class:"preview-img"},null,8,vs)):(d(),r(x,{key:0},[s[25]||(s[25]=l("i",{class:"fas fa-file-upload"},null,-1)),s[26]||(s[26]=l("span",null,"رفع الجواز (صورة أو PDF)",-1))],64))]),t(i).passport?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[7]||(s[7]=o=>q("passport"))},[...s[28]||(s[28]=[l("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),l("div",bs,[s[34]||(s[34]=l("label",{class:"label"},[p("صورة القسيمة "),l("span",{class:"required"},"*")],-1)),l("div",{class:y(["file-wrapper",{"has-file":t(i).voucher}])},[l("input",{type:"file",id:"voucher_photo",class:"file-input",onChange:s[8]||(s[8]=o=>k(o,"voucher")),accept:"image/*,.pdf",required:""},null,32),l("label",gs,[t(i).voucher?w("voucher")?(d(),r("div",_s,[...s[32]||(s[32]=[l("i",{class:"fas fa-file-pdf"},null,-1),l("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:t(i).voucher,class:"preview-img"},null,8,ys)):(d(),r(x,{key:0},[s[30]||(s[30]=l("i",{class:"fas fa-receipt"},null,-1)),s[31]||(s[31]=l("span",null,"رفع القسيمة (صورة أو PDF)",-1))],64))]),t(i).voucher?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[9]||(s[9]=o=>q("voucher"))},[...s[33]||(s[33]=[l("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),l("div",ks,[s[39]||(s[39]=l("label",{class:"label"},[p("صورة الرقم الوطني "),l("span",{class:"required"},"*")],-1)),l("div",{class:y(["file-wrapper",{"has-file":t(i).national_id}])},[l("input",{type:"file",id:"national_id_photo",class:"file-input",onChange:s[10]||(s[10]=o=>k(o,"national_id")),accept:"image/*,.pdf",required:""},null,32),l("label",ws,[t(i).national_id?w("national_id")?(d(),r("div",qs,[...s[37]||(s[37]=[l("i",{class:"fas fa-file-pdf"},null,-1),l("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:t(i).national_id,class:"preview-img"},null,8,xs)):(d(),r(x,{key:0},[s[35]||(s[35]=l("i",{class:"fas fa-address-card"},null,-1)),s[36]||(s[36]=l("span",null,"رفع الرقم الوطني (صورة أو PDF)",-1))],64))]),t(i).national_id?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[11]||(s[11]=o=>q("national_id"))},[...s[38]||(s[38]=[l("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),l("div",Cs,[s[44]||(s[44]=l("label",{class:"label"},"صورة إضافية (اختياري)",-1)),l("div",{class:y(["file-wrapper",{"has-file":t(i).additional}])},[l("input",{type:"file",id:"additional_photo",class:"file-input",onChange:s[12]||(s[12]=o=>k(o,"additional")),accept:"image/*,.pdf"},null,32),l("label",Fs,[t(i).additional?w("additional")?(d(),r("div",Ds,[...s[42]||(s[42]=[l("i",{class:"fas fa-file-pdf"},null,-1),l("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:t(i).additional,class:"preview-img"},null,8,hs)):(d(),r(x,{key:0},[s[40]||(s[40]=l("i",{class:"fas fa-plus-circle"},null,-1)),s[41]||(s[41]=l("span",null,"رفع مستند إضافي",-1))],64))]),t(i).additional?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[13]||(s[13]=o=>q("additional"))},[...s[43]||(s[43]=[l("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)])])]),s[49]||(s[49]=l("div",{class:"status-alert warning bottom-alert"},[l("i",{class:"fas fa-exclamation-triangle"}),l("span",null,"يرجى التأكد من ان التحويل المالي تم من نفس حساب صاحب البطاقه إلى حساب الشركة المذكور أعلاه")],-1)),l("div",Ps,[l("button",{type:"submit",class:"submit-btn",disabled:t(v)},[l("span",null,S(t(v)?"جاري المعالجة...":"ارسال المرفقات"),1),l("i",{class:y(t(v)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,Ss)])],32)])]),t(h)?(d(),r("div",Vs,[l("div",Bs,[l("div",Ms,[s[52]||(s[52]=l("div",{class:"success-icon"},[l("i",{class:"fas fa-check-circle"})],-1)),s[53]||(s[53]=l("h2",null,"تم تقديم طلبك بنجاح!",-1)),s[54]||(s[54]=l("p",null,"رقم تتبع الحجز الخاص بك:",-1)),l("div",Ns,S(t(P)),1),s[55]||(s[55]=l("p",{class:"hint"},"احتفظ بهذا الرقم لتتبع حالة حجزك لاحقاً",-1)),l("div",Us,[F(u,{to:"/",class:"submit-btn secondary"},{default:D(()=>[...s[50]||(s[50]=[l("i",{class:"fas fa-home"},null,-1),l("span",null,"الرئيسية",-1)])]),_:1}),F(u,{to:"/booking-cards/track",class:"submit-btn"},{default:D(()=>[...s[51]||(s[51]=[l("i",{class:"fas fa-search"},null,-1),l("span",null,"تتبع الطلب",-1)])]),_:1})])])])])):g("",!0)])}}}),Rs=W($s,[["__scopeId","data-v-4ba2c79d"]]);export{Rs as default};
