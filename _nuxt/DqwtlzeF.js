import{h as N,E as O,y as z,i as u,c as l,a as t,l as p,f as D,m as a,B as x,C,G as M,t as i,n as _,F as V,r as S,d as $,D as U,o as n,K as j,_ as F}from"./BOKWjyXS.js";const R={class:"wu-page"},G={class:"container"},L={class:"wu-form-card"},P={key:0,class:"wu-step"},q={class:"wu-form-group"},A={key:0,class:"wu-error",style:{display:"block"}},H=["disabled"],J={key:1,class:"wu-step"},Q={class:"wu-otp-wrapper"},W=["onUpdate:modelValue","onInput","onKeydown"],X={key:0,class:"wu-error",style:{display:"block","text-align":"center"}},Y={class:"wu-btn-group"},Z=["disabled"],tt={key:2,class:"wu-step"},st={key:0,class:"table-wrapper"},et={class:"wu-results-table"},at={key:1,class:"wu-no-results"},lt={key:0,class:"wu-modal-overlay"},nt={class:"wu-modal"},ot={class:"wu-modal-body",style:{padding:"50px 30px","text-align":"center"}},ut=N({__name:"track",setup(it){O({title:"تتبع طلب ويسترن يونيون | الرحالة للصرافة",description:"تتبع حالة طلب تحويل ويسترن يونيون الخاص بك"}),z();const r=u(1),c=u(""),w=u(""),m=u(!1),h=u(""),d=u(["","","",""]),g=u([]),v=u(""),f=u(!1),b=u([]),k=u(!1),B=async()=>{if(!c.value){w.value="يرجى إدخال رقم الهاتف";return}k.value=!0},I=o=>{d.value[o]&&o<3&&g.value[o+1]?.focus()},T=(o,s)=>{!d.value[o]&&o>0&&g.value[o-1]?.focus()},E=async()=>{const o=d.value.join("");if(o.length!==4){v.value="يرجى إدخال الرمز كاملاً";return}f.value=!0,v.value="";try{const s=U(),e=await $fetch(`${s.public.apiBase}/western-union/verify-tracking-otp`,{method:"POST",body:{token:h.value,otp:o}});e.success&&(b.value=e.transfers,r.value=3)}catch(s){v.value=s.data?.message||"رمز التحقق غير صحيح"}finally{f.value=!1}},K=()=>{r.value=1,c.value="",d.value=["","","",""],b.value=[],h.value=""};return(o,s)=>(n(),l("div",R,[t("div",G,[s[11]||(s[11]=D('<div class="wu-header" data-v-25031084><div class="wu-badge" data-v-25031084><i class="fas fa-search-location" data-v-25031084></i><span data-v-25031084>ويسترن يونيون</span></div><h1 class="wu-title" data-v-25031084>تتبع <span class="gradient-text" data-v-25031084>طلب التحويل</span></h1><p class="wu-subtitle" data-v-25031084>أدخل رقم هاتفك للبحث عن طلباتك</p></div>',1)),t("div",L,[a(r)===1?(n(),l("div",P,[t("div",q,[s[3]||(s[3]=t("label",{class:"wu-label"},"رقم الهاتف",-1)),x(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>M(c)?c.value=e:null),type:"tel",class:"wu-input",placeholder:"أدخل رقم هاتفك"},null,512),[[C,a(c)]]),s[4]||(s[4]=t("p",{class:"wu-hint"},"نفس الرقم المستخدم في طلب التحويل",-1)),a(w)?(n(),l("div",A,i(a(w)),1)):p("",!0)]),t("button",{type:"button",class:"wu-btn wu-btn-primary",onClick:B,disabled:a(m)},[t("i",{class:_(a(m)?"fas fa-spinner fa-spin":"fas fa-search")},null,2),t("span",null,i(a(m)?"جاري البحث...":"بحث"),1)],8,H)])):p("",!0),a(r)===2?(n(),l("div",J,[s[6]||(s[6]=t("p",null,"تم إرسال رمز التحقق إلى رقم هاتفك عبر الواتساب",-1)),t("div",Q,[(n(),l(V,null,S(4,e=>x(t("input",{key:e,ref_for:!0,ref:y=>a(g)[e-1]=y,"onUpdate:modelValue":y=>a(d)[e-1]=y,type:"text",class:"wu-otp-input",maxlength:"1",onInput:y=>I(e-1),onKeydown:j(y=>T(e-1),["backspace"])},null,40,W),[[C,a(d)[e-1]]])),64))]),a(v)?(n(),l("div",X,i(a(v)),1)):p("",!0),t("div",Y,[t("button",{type:"button",class:"wu-btn wu-btn-primary",onClick:E,disabled:a(f)},[t("i",{class:_(a(f)?"fas fa-spinner fa-spin":"fas fa-check")},null,2),t("span",null,i(a(f)?"جاري التحقق...":"تأكيد"),1)],8,Z),t("button",{type:"button",class:"wu-btn wu-btn-outline",onClick:s[1]||(s[1]=e=>r.value=1)},[...s[5]||(s[5]=[t("span",null,"رجوع",-1)])])])])):p("",!0),a(r)===3?(n(),l("div",tt,[s[10]||(s[10]=t("h3",{style:{"margin-bottom":"20px",display:"flex","align-items":"center","justify-content":"center",gap:"10px"}},[t("i",{class:"fas fa-list"}),t("span",null,"طلباتك")],-1)),a(b).length>0?(n(),l("div",st,[t("table",et,[s[7]||(s[7]=t("thead",null,[t("tr",null,[t("th",null,"رقم التتبع"),t("th",null,"اسم المستلم"),t("th",null,"المبلغ"),t("th",null,"الحالة"),t("th",null,"التاريخ")])],-1)),t("tbody",null,[(n(!0),l(V,null,S(a(b),e=>(n(),l("tr",{key:e.tracking_code},[t("td",null,i(e.tracking_code),1),t("td",null,i(e.receiver_name),1),t("td",null,"$"+i(e.amount),1),t("td",null,[t("span",{class:_(["wu-status-badge",e.status_class])},i(e.status_label),3)]),t("td",null,i(e.created_at),1)]))),128))])])])):(n(),l("div",at,[...s[8]||(s[8]=[t("i",{class:"fas fa-inbox"},null,-1),t("p",null,"لا توجد طلبات",-1)])])),t("div",{class:"wu-btn-group",style:{"margin-top":"30px"}},[t("button",{type:"button",class:"wu-btn wu-btn-outline",onClick:K},[...s[9]||(s[9]=[t("i",{class:"fas fa-arrow-right"},null,-1),t("span",null,"بحث جديد",-1)])])])])):p("",!0)])]),a(k)?(n(),l("div",lt,[t("div",nt,[t("div",ot,[s[13]||(s[13]=t("div",{style:{"font-size":"4rem",color:"#ffc107","margin-bottom":"20px"}},[t("i",{class:"fas fa-clock"})],-1)),s[14]||(s[14]=t("h2",{style:{"margin-bottom":"15px",color:"var(--text-primary)"}},"الخدمة قيد التطوير",-1)),s[15]||(s[15]=t("p",{style:{color:"var(--text-secondary)","font-size":"1.1rem","margin-bottom":"25px"}},[$(" خدمة تتبع ويسترن يونيون ستكون متاحة قريباً!"),t("br"),$(" شكراً لصبركم. ")],-1)),t("button",{type:"button",class:"wu-btn wu-btn-primary",onClick:s[2]||(s[2]=e=>k.value=!1)},[...s[12]||(s[12]=[t("i",{class:"fas fa-arrow-right"},null,-1),t("span",null,"رجوع",-1)])])])])])):p("",!0)]))}}),dt=F(ut,[["__scopeId","data-v-25031084"]]);export{dt as default};
