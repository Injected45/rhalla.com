import{_ as L}from"./B4Wgx5kP.js";import{g as P,y as z,x as E,l as c,B as F,c as l,a as s,e as O,q as m,j as t,F as S,t as o,n as h,d as R,s as j,v as U,z as A,b as G,w as H,r as J,o as d,_ as K}from"./B_ymwll6.js";const Q={class:"track-page"},W={class:"container"},Y={key:0,class:"loading-state"},Z={key:1,class:"disabled-message"},ss={key:0,class:"marquee-wrapper"},as={class:"marquee-banner"},ts={class:"marquee-track"},es={class:"marquee-text"},ns={class:"marquee-text"},ls={class:"marquee-text"},os={class:"marquee-text"},ds={class:"marquee-text"},is={class:"marquee-text"},cs={class:"track-card"},rs=["disabled"],us={key:0,class:"phone-input-step"},ps={class:"form-group"},fs={class:"input-wrapper"},_s=["disabled"],vs={key:1,class:"results-container"},ms={class:"results-header"},bs={key:0,class:"no-results"},hs={key:1,class:"bookings-grid"},gs={class:"card-main"},ks={class:"card-info"},ys={class:"info-value"},xs={class:"card-info"},$s={class:"info-value"},qs={class:"card-info"},Ss={class:"info-value tracking-code"},Xs={class:"card-info"},ws={class:"info-value"},Cs={key:2,class:"status-alert"},Ns=P({__name:"track",setup(Bs){z({title:"تتبع حجز البطاقة | شركة الرحالة",description:"تتبع حالة حجز بطاقة الأغراض الشخصية الخاصة بك"});const g=E().public.apiBase,i=c("loading"),r=c(""),X={0:"الأحد",1:"الإثنين",2:"الثلاثاء",3:"الأربعاء",4:"الخميس",5:"الجمعة",6:"السبت"};function w(e){if(!e)return"";const v=e.replace("T"," ").replace(/[+-]\d{2}:\d{2}$/,"").trim().split(" "),n=v[0]||"",N=v[1]||"00:00",b=n.split("-"),k=b[0]||"2026",y=b[1]||"01",x=b[2]||"01",$=N.split(":"),q=parseInt($[0]||"0"),B=$[1]||"00",D=new Date(parseInt(k),parseInt(y)-1,parseInt(x)),V=X[D.getDay()],I=q%12||12,T=q<12?"ص":"م",M=String(I).padStart(2,"0");return`سوف تفتح المنصة يوم ${V} الموافق ${k}/${y}/${x}م الساعة ${M}:${B}${T} — كونوا مستعدين ومستوفيين للشروط`}F(async()=>{try{const e=await $fetch(`${g}/booking-cards/status`);e&&e.status?(i.value=e.status,e.status==="scheduled"&&e.scheduled_date&&(r.value=w(e.scheduled_date))):i.value="open"}catch(e){console.error("Error fetching status:",e),i.value="disabled"}});const f=c(1),u=c(""),p=c(!1);c(""),c(["","","",""]),c([]),c("");const _=c([]),C=async()=>{if(u.value){p.value=!0;try{const e=await $fetch(`${g}/booking-cards/track`,{method:"POST",body:{phone:u.value}});e.success&&(_.value=e.bookings,f.value=3)}catch(e){alert(e.data?.message||"لم يتم العثور على حجوزات لهذا الرقم.")}finally{p.value=!1}}};return(e,a)=>{const v=L;return d(),l("div",Q,[s("div",W,[a[16]||(a[16]=O('<div class="page-header" data-v-756df6ba><div class="header-badge" data-v-756df6ba><i class="fas fa-search" data-v-756df6ba></i><span data-v-756df6ba>تتبع الطلب</span></div><h1 class="page-title" data-v-756df6ba>تتبع حالة <span class="gradient-text" data-v-756df6ba>المستندات</span></h1><p class="page-subtitle" data-v-756df6ba>أدخل رقم هاتفك المسجل لعرض حالة طلبك ومستنداتك</p></div>',1)),t(i)==="loading"?(d(),l("div",Y,[...a[2]||(a[2]=[s("div",{class:"spinner"},null,-1),s("p",null,"جاري التحقق من حالة المنصة...",-1)])])):t(i)==="disabled"?(d(),l("div",Z,[...a[3]||(a[3]=[s("div",{class:"disabled-card"},[s("i",{class:"fas fa-ban disabled-icon"}),s("h2",null,"المنصة غير متاحة حاليًا."),s("p",null,"منصة الرحالة مرتبطة تقنيًا بمنصة مصرف ليبيا المركزي، وتعمل فقط خلال فترات الحجز الرسمية")],-1)])])):t(i)==="scheduled"||t(i)==="open"?(d(),l(S,{key:2},[t(i)==="scheduled"?(d(),l("div",ss,[s("div",as,[s("div",ts,[s("span",es,o(t(r)),1),s("span",ns,o(t(r)),1),s("span",ls,o(t(r)),1),s("span",os,o(t(r)),1),s("span",ds,o(t(r)),1),s("span",is,o(t(r)),1)])])])):m("",!0),s("div",cs,[s("fieldset",{disabled:t(i)==="scheduled",class:h({"form-disabled":t(i)==="scheduled"})},[t(f)===1?(d(),l("div",us,[s("div",ps,[a[5]||(a[5]=s("label",{class:"label"},[R("رقم الهاتف المسجل "),s("span",{class:"required"},"*")],-1)),s("div",fs,[a[4]||(a[4]=s("i",{class:"fas fa-phone-flip"},null,-1)),j(s("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>A(u)?u.value=n:null),type:"tel",class:"input",placeholder:"09XXXXXXXXXX : مثال",required:""},null,512),[[U,t(u)]])])]),s("button",{class:"submit-btn",disabled:t(p),onClick:C},[s("span",null,o(t(p)?"جاري التحميل...":"موافق"),1),s("i",{class:h(t(p)?"fas fa-spinner fa-spin":"fas fa-check-circle")},null,2)],8,_s)])):t(f)===3?(d(),l("div",vs,[s("div",ms,[a[7]||(a[7]=s("h3",null,"الحجوزات المرتبطة برقم الهاتف",-1)),s("button",{class:"track-again-btn",onClick:a[1]||(a[1]=n=>f.value=1)},[...a[6]||(a[6]=[s("i",{class:"fas fa-rotate-left"},null,-1),s("span",null,"بحث آخر",-1)])])]),t(_).length===0?(d(),l("div",bs,[a[9]||(a[9]=s("i",{class:"fas fa-folder-open"},null,-1)),a[10]||(a[10]=s("p",null,"لم يتم العثور على أي حجوزات مؤكدة لهذا الرقم",-1)),G(v,{to:"/booking-cards",class:"submit-btn"},{default:H(()=>[...a[8]||(a[8]=[s("span",null,"احجز الآن",-1)])]),_:1})])):(d(),l("div",hs,[(d(!0),l(S,null,J(t(_),n=>(d(),l("div",{key:n.tracking_code,class:"booking-card"},[s("div",{class:h(["card-status",`status-${n.status_val}`])},o(n.status),3),s("div",gs,[s("div",ks,[a[11]||(a[11]=s("span",{class:"info-label"},"اسم صاحب الطلب",-1)),s("span",ys,o(n.name),1)]),s("div",xs,[a[12]||(a[12]=s("span",{class:"info-label"},"نوع الدفع",-1)),s("span",$s,o(n.payment_type),1)]),s("div",qs,[a[13]||(a[13]=s("span",{class:"info-label"},"رقم التتبع",-1)),s("span",Ss,o(n.tracking_code),1)]),s("div",Xs,[a[14]||(a[14]=s("span",{class:"info-label"},"تاريخ الطلب",-1)),s("span",ws,o(n.date),1)])])]))),128))])),t(_).some(n=>n.status_val===0)?(d(),l("div",Cs,[...a[15]||(a[15]=[s("i",{class:"fas fa-exclamation-triangle"},null,-1),s("span",null,"ستصلك رساله قريبة بنتيجة المعامله",-1)])])):m("",!0)])):m("",!0)],10,rs)])],64)):m("",!0)])])}}}),Ts=K(Ns,[["__scopeId","data-v-756df6ba"]]);export{Ts as default};
