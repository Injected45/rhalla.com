import{_ as P}from"./8bR--S0_.js";import{f as T,A as K,q as R,s as i,g as G,c as r,a as s,h as y,e as j,v as J,x as u,d as n,y as m,i as t,D as I,F as $,r as F,t as b,n as N,b as Z,w as H,z as Q,o as d,I as W}from"./yCz2Nzaa.js";import{u as X}from"./DihVBgSk.js";import{_ as Y}from"./DlAUqK2U.js";const ss={class:"wu-page"},es={class:"container"},ts={class:"wu-form-card"},ls={class:"wu-form-row"},os={class:"wu-form-group"},as={class:"wu-form-group"},ns={class:"wu-form-row"},is={class:"wu-form-group"},rs={class:"wu-form-group"},us={class:"wu-form-row"},ds={class:"wu-form-group"},ps={class:"wu-form-group"},ms={class:"wu-file-wrapper"},fs={key:0,class:"wu-preview-container show"},vs=["src"],ws={class:"wu-form-row"},cs={class:"wu-form-group"},ys={class:"wu-form-group"},bs={class:"wu-form-row"},gs={class:"wu-form-group"},_s={key:0,class:"wu-shimmer-select"},ks=["value"],xs={class:"wu-form-group"},qs={class:"wu-form-row"},Vs={class:"wu-form-group"},Cs={class:"wu-amount-wrapper"},Us={class:"wu-submit-wrapper"},Ms=["disabled"],Bs={key:0,class:"wu-modal-overlay show"},Ss={class:"wu-modal"},Is={class:"wu-modal-body"},$s={class:"wu-otp-wrapper"},Fs=["onUpdate:modelValue","onInput","onKeydown"],Ns={key:0,class:"wu-modal-error",style:{display:"block"}},hs=["disabled"],zs={key:1,class:"wu-modal-overlay show"},Os={class:"wu-modal"},As={class:"wu-modal-body",style:{padding:"50px 30px","text-align":"center"}},Ds={key:2,class:"wu-modal-overlay show"},Es={class:"wu-modal"},Ls={class:"wu-modal-body",style:{"padding-top":"50px"}},Ps={class:"wu-tracking-code"},Ts=T({__name:"transfer",setup(Ks){K({title:"طلب تحويل ويسترن يونيون | الرحالة للصرافة",description:"قم بإرسال الأموال عبر ويسترن يونيون من ليبيا إلى أي مكان في العالم"});const{error:C}=X(),o=R({sender_name:"",sender_country:"",sender_city:"",national_id:"",sender_phone:"",receiver_name_ar:"",receiver_name_en:"",receiver_country:"",receiver_phone:"",amount:""}),_=i(null),g=i(""),U=i([]),k=i(!0),x=i(!1),h=i(""),M=i(!1),v=i(["","","",""]),q=i([]),w=i(""),c=i(!1),B=i(!1),S=i("");G(async()=>{k.value=!0;try{const a=await $fetch("/api/western-union/countries");U.value=a.countries}catch(a){console.error("Failed to load countries",a)}finally{k.value=!1}});const z=a=>{const p=a.target.files?.[0];if(p){if(p.size>5*1024*1024){C("حجم الصورة يجب أن يكون أقل من 5MB");return}_.value=p;const l=new FileReader;l.onload=f=>{g.value=f.target?.result},l.readAsDataURL(p)}},O=()=>{_.value=null,g.value="";const a=document.getElementById("passport_image");a&&(a.value="")},V=i(!1),A=async()=>{if(!_.value){C("يرجى رفع صورة الجواز");return}V.value=!0},D=a=>{v.value[a]&&a<3&&q.value[a+1]?.focus()},E=(a,e)=>{!v.value[a]&&a>0&&q.value[a-1]?.focus()},L=async()=>{const a=v.value.join("");if(a.length!==4){w.value="يرجى إدخال الرمز كاملاً";return}c.value=!0,w.value="";try{const e=Q(),p=await $fetch(`${e.public.apiBase}/western-union/verify-otp`,{method:"POST",body:{token:h.value,otp:a}});p.success&&(M.value=!1,S.value=p.tracking_code,B.value=!0)}catch(e){w.value=e.data?.message||"رمز التحقق غير صحيح"}finally{c.value=!1}};return(a,e)=>{const p=P;return d(),r("div",ss,[s("div",es,[e[34]||(e[34]=j('<div class="wu-header" data-v-6f7aae9e><div class="wu-badge" data-v-6f7aae9e><i class="fas fa-money-bill-transfer" data-v-6f7aae9e></i><span data-v-6f7aae9e>ويسترن يونيون</span></div><h1 class="wu-title" data-v-6f7aae9e>طلب تحويل <span class="gradient-text" data-v-6f7aae9e>ويسترن يونيون</span></h1><p class="wu-subtitle" data-v-6f7aae9e>يرجى ملء جميع البيانات بشكل صحيح لإتمام عملية التحويل</p></div>',1)),s("div",ts,[s("form",{onSubmit:J(A,["prevent"])},[e[31]||(e[31]=s("h3",{class:"wu-section-title"},[s("i",{class:"fas fa-user"}),s("span",null,"معلومات الراسل")],-1)),s("div",ls,[s("div",os,[e[11]||(e[11]=s("label",{class:"wu-label"},[n("اسم الراسل "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).sender_name=l),type:"text",class:"wu-input",required:""},null,512),[[m,t(o).sender_name]])]),s("div",as,[e[13]||(e[13]=s("label",{class:"wu-label"},[n("بلد الراسل "),s("span",{class:"required"},"*")],-1)),u(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).sender_country=l),class:"wu-select",required:""},[...e[12]||(e[12]=[s("option",{value:""},"اختر البلد",-1),s("option",{value:"ليبيا"},"ليبيا",-1)])],512),[[I,t(o).sender_country]])])]),s("div",ns,[s("div",is,[e[14]||(e[14]=s("label",{class:"wu-label"},[n("المدينة "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).sender_city=l),type:"text",class:"wu-input",required:""},null,512),[[m,t(o).sender_city]])]),s("div",rs,[e[15]||(e[15]=s("label",{class:"wu-label"},[n("الرقم الوطني (12 رقم) "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).national_id=l),type:"text",class:"wu-input",maxlength:"12",pattern:"[0-9]{12}",required:""},null,512),[[m,t(o).national_id]])])]),s("div",us,[s("div",ds,[e[16]||(e[16]=s("label",{class:"wu-label"},[n("رقم هاتف الراسل "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).sender_phone=l),type:"tel",class:"wu-input",placeholder:"مثال: 0912345678",required:""},null,512),[[m,t(o).sender_phone]]),e[17]||(e[17]=s("span",{class:"wu-hint"},"أرقام ليبيا أو مصر فقط - سيتم إرسال رمز التحقق عبر الواتساب",-1))]),s("div",ps,[e[20]||(e[20]=s("label",{class:"wu-label"},[n("صورة الجواز "),s("span",{class:"required"},"*")],-1)),s("div",ms,[s("input",{type:"file",class:"wu-file-input",id:"passport_image",onChange:z,accept:"image/*",required:""},null,32),e[18]||(e[18]=s("label",{for:"passport_image",class:"wu-file-label"},[s("i",{class:"fas fa-cloud-upload-alt"}),s("span",{class:"wu-file-text"},"اضغط لرفع صورة الجواز")],-1))]),e[21]||(e[21]=s("span",{class:"wu-hint"},"الصيغ المسموحة: JPG, PNG - الحد الأقصى: 5MB",-1)),t(g)?(d(),r("div",fs,[s("img",{src:t(g),class:"wu-preview-img",alt:"معاينة"},null,8,vs),s("button",{type:"button",class:"wu-preview-remove",onClick:O},[...e[19]||(e[19]=[s("i",{class:"fas fa-times"},null,-1)])])])):y("",!0)])]),e[32]||(e[32]=s("hr",{class:"wu-divider"},null,-1)),e[33]||(e[33]=s("h3",{class:"wu-section-title",style:{color:"#00B17A"}},[s("i",{class:"fas fa-user-check"}),s("span",null,"معلومات المستلم")],-1)),s("div",ws,[s("div",cs,[e[22]||(e[22]=s("label",{class:"wu-label"},[n("اسم المستلم بالكامل (بالعربي) "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).receiver_name_ar=l),type:"text",class:"wu-input",required:""},null,512),[[m,t(o).receiver_name_ar]])]),s("div",ys,[e[23]||(e[23]=s("label",{class:"wu-label"},[n("اسم المستلم بالكامل (بالإنجليزي) "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).receiver_name_en=l),type:"text",class:"wu-input",pattern:"[a-zA-Z\\s]+",required:""},null,512),[[m,t(o).receiver_name_en]]),e[24]||(e[24]=s("span",{class:"wu-hint"},"حروف إنجليزية فقط",-1))])]),s("div",bs,[s("div",gs,[e[27]||(e[27]=s("label",{class:"wu-label"},[n("بلد المستلم "),s("span",{class:"required"},"*")],-1)),t(k)?(d(),r("div",_s,[...e[25]||(e[25]=[s("div",{class:"shimmer-animation"},null,-1)])])):u((d(),r("select",{key:1,"onUpdate:modelValue":e[7]||(e[7]=l=>t(o).receiver_country=l),class:"wu-select",required:""},[e[26]||(e[26]=s("option",{value:""},"اختر البلد",-1)),(d(!0),r($,null,F(t(U),l=>(d(),r("option",{key:l,value:l},b(l),9,ks))),128))],512)),[[I,t(o).receiver_country]])]),s("div",xs,[e[28]||(e[28]=s("label",{class:"wu-label"},[n("رقم هاتف المستلم "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>t(o).receiver_phone=l),type:"tel",class:"wu-input",required:""},null,512),[[m,t(o).receiver_phone]])])]),s("div",qs,[s("div",Vs,[e[30]||(e[30]=s("label",{class:"wu-label"},[n("المبلغ بالدولار ($) "),s("span",{class:"required"},"*")],-1)),s("div",Cs,[e[29]||(e[29]=s("span",{class:"wu-amount-prefix"},"$",-1)),u(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t(o).amount=l),type:"number",class:"wu-input wu-amount-input",min:"1",step:"0.01",required:""},null,512),[[m,t(o).amount]])])])]),s("div",Us,[s("button",{type:"submit",class:"wu-submit-btn",disabled:t(x)},[s("span",null,b(t(x)?"جاري الإرسال...":"التالي"),1),s("i",{class:N(t(x)?"fas fa-spinner fa-spin":"fas fa-arrow-left")},null,2)],8,Ms)])],32)])]),t(M)?(d(),r("div",Bs,[s("div",Ss,[e[36]||(e[36]=s("div",{class:"wu-modal-header"},[s("i",{class:"fas fa-shield-halved"}),s("h3",null,"التحقق من رقم الهاتف")],-1)),s("div",Is,[e[35]||(e[35]=s("p",null,[n("تم إرسال رمز التحقق إلى رقم هاتفك عبر الواتساب"),s("br"),n("أدخل الرمز المكون من 4 أرقام")],-1)),s("div",$s,[(d(),r($,null,F(4,l=>u(s("input",{key:l,ref_for:!0,ref:f=>t(q)[l-1]=f,"onUpdate:modelValue":f=>t(v)[l-1]=f,type:"text",class:"wu-otp-input",maxlength:"1",onInput:f=>D(l-1),onKeydown:W(f=>E(l-1),["backspace"])},null,40,Fs),[[m,t(v)[l-1]]])),64))]),t(w)?(d(),r("div",Ns,b(t(w)),1)):y("",!0),s("button",{type:"button",class:"wu-submit-btn",onClick:L,disabled:t(c)},[s("i",{class:N(t(c)?"fas fa-spinner fa-spin":"fas fa-check")},null,2),s("span",null,b(t(c)?"جاري التحقق...":"تأكيد"),1)],8,hs)])])])):y("",!0),t(V)?(d(),r("div",zs,[s("div",Os,[s("div",As,[e[38]||(e[38]=s("div",{class:"wu-success-icon",style:{color:"#ffc107"}},[s("i",{class:"fas fa-clock"})],-1)),e[39]||(e[39]=s("h2",{style:{"margin-bottom":"15px",color:"var(--text-primary)"}},"الخدمة قيد التطوير",-1)),e[40]||(e[40]=s("p",{style:{color:"var(--text-secondary)","font-size":"1.1rem","margin-bottom":"25px"}},[n(" خدمة ويسترن يونيون ستكون متاحة قريباً!"),s("br"),n(" شكراً لصبركم. ")],-1)),s("button",{type:"button",class:"wu-submit-btn",onClick:e[10]||(e[10]=l=>V.value=!1),style:{background:"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)"}},[...e[37]||(e[37]=[s("i",{class:"fas fa-arrow-right"},null,-1),s("span",null,"رجوع",-1)])])])])])):y("",!0),t(B)?(d(),r("div",Ds,[s("div",Es,[s("div",Ls,[e[42]||(e[42]=s("div",{class:"wu-success-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),e[43]||(e[43]=s("h2",{style:{"margin-bottom":"10px"}},"تم تقديم طلبك بنجاح!",-1)),e[44]||(e[44]=s("p",null,"رقم التتبع الخاص بك:",-1)),s("div",Ps,b(t(S)),1),e[45]||(e[45]=s("p",{style:{"font-size":"0.9rem"}},"احتفظ بهذا الرقم لتتبع طلبك",-1)),Z(p,{to:"/",class:"wu-submit-btn",style:{"margin-top":"20px","text-decoration":"none"}},{default:H(()=>[...e[41]||(e[41]=[s("i",{class:"fas fa-home"},null,-1),s("span",null,"العودة للرئيسية",-1)])]),_:1})])])])):y("",!0)])}}}),Zs=Y(Ts,[["__scopeId","data-v-6f7aae9e"]]);export{Zs as default};
