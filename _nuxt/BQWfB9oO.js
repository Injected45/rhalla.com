import{_ as E}from"./cd3IMDkW.js";import{g as F,y as D,x as G,k as K,l as d,B as L,c as u,a as s,q as k,e as j,m as z,s as r,d as n,v as i,j as t,G as P,F as $,r as h,t as _,n as C,b as R,w as A,o as m,E as H,_ as J}from"./BGB-hdkG.js";import{u as Q}from"./CeKrEGTg.js";const W={class:"mg-page"},X={class:"container"},Y={class:"mg-form-card"},Z={class:"mg-form-row"},ss={class:"mg-form-group"},es={class:"mg-form-group"},ts={class:"mg-form-row"},ls={class:"mg-form-group"},as={class:"mg-form-group"},os={class:"mg-form-row"},ns={class:"mg-form-group"},rs={class:"mg-amount-wrapper"},is={class:"mg-form-group"},ds={key:0,class:"mg-shimmer-select"},us=["value"],ms={class:"mg-form-row"},ps={class:"mg-form-group"},gs={class:"mg-form-group"},fs={class:"mg-form-row"},cs={class:"mg-form-group"},vs={class:"mg-form-group"},_s={class:"mg-form-row"},bs={class:"mg-form-group"},ys={class:"mg-form-group"},qs={class:"mg-form-row"},ws={class:"mg-form-group"},ks={class:"mg-form-group"},xs={class:"mg-form-row"},Vs={class:"mg-form-group"},Us={class:"mg-submit-wrapper"},Ss=["disabled"],$s={key:0,class:"mg-modal-overlay show"},hs={class:"mg-modal"},Cs={class:"mg-modal-body"},Ms={class:"mg-otp-wrapper"},Bs=["onUpdate:modelValue","onInput","onKeydown"],Is={key:0,class:"mg-modal-error",style:{display:"block"}},Ns=["disabled"],Os={key:1,class:"mg-modal-overlay show"},Ts={class:"mg-modal"},Es={class:"mg-modal-body",style:{"padding-top":"50px"}},Fs={class:"mg-tracking-code"},Ds=F({__name:"transfer",setup(Gs){D({title:"طلب تحويل موني جرام | الرحالة للصرافة",description:"قم بإرسال الأموال عبر موني جرام MoneyGram من ليبيا إلى أي مكان في العالم"});const{error:M}=Q(),b=G().public.apiBase,a=K({sender_phone:"",sender_first_name:"",sender_father_name:"",sender_surname:"",amount:"",destination_country:"",id_number_type:"",id_issuance_place:"",sender_dob:"",sender_occupation:"",receiver_first_name:"",receiver_father_name:"",receiver_surname:"",receiver_birth_place:"",receiver_birth_date:""}),x=d([]),y=d(!0),p=d(!1),V=d(""),q=d(!1),g=d(["","","",""]),w=d([]),f=d(""),c=d(!1),U=d(!1),S=d("");L(async()=>{y.value=!0;try{const o=await $fetch(`${b}/moneygram/countries`);o.success&&(x.value=o.countries)}catch(o){console.error("Failed to load countries",o)}finally{y.value=!1}});const B=async()=>{p.value=!0;try{const o=await $fetch(`${b}/moneygram/transfer`,{method:"POST",body:a});o.success&&(V.value=o.token,q.value=!0)}catch(o){M(o.data?.message||"حدث خطأ أثناء إرسال البيانات. يرجى المحاولة مرة أخرى.")}finally{p.value=!1}},I=o=>{g.value[o]&&o<3&&w.value[o+1]?.focus()},N=(o,e)=>{!g.value[o]&&o>0&&w.value[o-1]?.focus()},O=async()=>{const o=g.value.join("");if(o.length!==4){f.value="يرجى إدخال الرمز كاملاً";return}c.value=!0,f.value="";try{const e=await $fetch(`${b}/moneygram/verify-otp`,{method:"POST",body:{token:V.value,otp:o}});e.success&&(q.value=!1,S.value=e.tracking_code,U.value=!0)}catch(e){f.value=e.data?.message||"رمز التحقق غير صحيح"}finally{c.value=!1}};return(o,e)=>{const T=E;return m(),u("div",W,[s("div",X,[e[37]||(e[37]=j('<div class="mg-header" data-v-e28af984><div class="mg-badge" data-v-e28af984><i class="fas fa-money-bill-transfer" data-v-e28af984></i><span data-v-e28af984>موني جرام</span></div><h1 class="mg-title" data-v-e28af984>طلب تحويل <span class="gradient-text mg-color" data-v-e28af984>MoneyGram</span></h1><p class="mg-subtitle" data-v-e28af984>يرجى ملء جميع البيانات الـ 15 المطلوبة بدقة لإتمام عملية التحويل</p></div>',1)),s("div",Y,[s("form",{onSubmit:z(B,["prevent"])},[e[34]||(e[34]=s("h3",{class:"mg-section-title"},[s("i",{class:"fas fa-user"}),s("span",null,"معلومات الراسل (Sender Info)")],-1)),s("div",Z,[s("div",ss,[e[15]||(e[15]=s("label",{class:"mg-label"},[n("رقم هاتف الراسل "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t(a).sender_phone=l),type:"tel",class:"mg-input",placeholder:"مثال: 0912345678",required:""},null,512),[[i,t(a).sender_phone]]),e[16]||(e[16]=s("span",{class:"mg-hint"},"أرقام ليبيا أو مصر فقط - للتحقق عبر الواتساب",-1))]),s("div",es,[e[17]||(e[17]=s("label",{class:"mg-label"},[n("الاسم الأول "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t(a).sender_first_name=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).sender_first_name]])])]),s("div",ts,[s("div",ls,[e[18]||(e[18]=s("label",{class:"mg-label"},[n("اسم الأب "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t(a).sender_father_name=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).sender_father_name]])]),s("div",as,[e[19]||(e[19]=s("label",{class:"mg-label"},[n("اللقب (الكنية) "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t(a).sender_surname=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).sender_surname]])])]),s("div",os,[s("div",ns,[e[21]||(e[21]=s("label",{class:"mg-label"},[n("المبلغ بالدولار ($) "),s("span",{class:"required"},"*")],-1)),s("div",rs,[e[20]||(e[20]=s("span",{class:"mg-amount-prefix"},"$",-1)),r(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t(a).amount=l),type:"number",class:"mg-input mg-amount-input",min:"1",step:"0.01",required:""},null,512),[[i,t(a).amount]])])]),s("div",is,[e[24]||(e[24]=s("label",{class:"mg-label"},[n("بلد الوجهة "),s("span",{class:"required"},"*")],-1)),t(y)?(m(),u("div",ds,[...e[22]||(e[22]=[s("div",{class:"shimmer-animation"},null,-1)])])):r((m(),u("select",{key:1,"onUpdate:modelValue":e[5]||(e[5]=l=>t(a).destination_country=l),class:"mg-select",required:""},[e[23]||(e[23]=s("option",{value:""},"اختر البلد",-1)),(m(!0),u($,null,h(t(x),l=>(m(),u("option",{key:l,value:l},_(l),9,us))),128))],512)),[[P,t(a).destination_country]])])]),s("div",ms,[s("div",ps,[e[25]||(e[25]=s("label",{class:"mg-label"},[n("رقم ونوع الهوية "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>t(a).id_number_type=l),type:"text",class:"mg-input",placeholder:"مثال: جواز سفر - D123456",required:""},null,512),[[i,t(a).id_number_type]])]),s("div",gs,[e[26]||(e[26]=s("label",{class:"mg-label"},[n("مكان إصدار الهوية "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>t(a).id_issuance_place=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).id_issuance_place]])])]),s("div",fs,[s("div",cs,[e[27]||(e[27]=s("label",{class:"mg-label"},[n("تاريخ الميلاد "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>t(a).sender_dob=l),type:"date",class:"mg-input",required:""},null,512),[[i,t(a).sender_dob]])]),s("div",vs,[e[28]||(e[28]=s("label",{class:"mg-label"},[n("المهنة "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t(a).sender_occupation=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).sender_occupation]])])]),e[35]||(e[35]=s("hr",{class:"mg-divider"},null,-1)),e[36]||(e[36]=s("h3",{class:"mg-section-title mg-color"},[s("i",{class:"fas fa-user-check"}),s("span",null,"معلومات المستلم (Receiver Info)")],-1)),s("div",_s,[s("div",bs,[e[29]||(e[29]=s("label",{class:"mg-label"},[n("الاسم الأول للمستلم "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>t(a).receiver_first_name=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).receiver_first_name]])]),s("div",ys,[e[30]||(e[30]=s("label",{class:"mg-label"},[n("اسم الأب للمستلم "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>t(a).receiver_father_name=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).receiver_father_name]])])]),s("div",qs,[s("div",ws,[e[31]||(e[31]=s("label",{class:"mg-label"},[n("لقب المستلم "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>t(a).receiver_surname=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).receiver_surname]])]),s("div",ks,[e[32]||(e[32]=s("label",{class:"mg-label"},[n("مكان ميلاد المستلم "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>t(a).receiver_birth_place=l),type:"text",class:"mg-input",required:""},null,512),[[i,t(a).receiver_birth_place]])])]),s("div",xs,[s("div",Vs,[e[33]||(e[33]=s("label",{class:"mg-label"},[n("تاريخ ميلاد المستلم "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>t(a).receiver_birth_date=l),type:"date",class:"mg-input",required:""},null,512),[[i,t(a).receiver_birth_date]])])]),s("div",Us,[s("button",{type:"submit",class:"mg-submit-btn",disabled:t(p)},[s("span",null,_(t(p)?"جاري الإرسال...":"التالي"),1),s("i",{class:C(t(p)?"fas fa-spinner fa-spin":"fas fa-arrow-left")},null,2)],8,Ss)])],32)])]),t(q)?(m(),u("div",$s,[s("div",hs,[e[39]||(e[39]=s("div",{class:"mg-modal-header"},[s("i",{class:"fas fa-shield-halved"}),s("h3",null,"التحقق من رقم الهاتف")],-1)),s("div",Cs,[e[38]||(e[38]=s("p",null,[n("تم إرسال رمز التحقق إلى رقم هاتفك عبر الواتساب"),s("br"),n("أدخل الرمز المكون من 4 أرقام")],-1)),s("div",Ms,[(m(),u($,null,h(4,l=>r(s("input",{key:l,ref_for:!0,ref:v=>t(w)[l-1]=v,"onUpdate:modelValue":v=>t(g)[l-1]=v,type:"text",class:"mg-otp-input",maxlength:"1",onInput:v=>I(l-1),onKeydown:H(v=>N(l-1),["backspace"])},null,40,Bs),[[i,t(g)[l-1]]])),64))]),t(f)?(m(),u("div",Is,_(t(f)),1)):k("",!0),s("button",{type:"button",class:"mg-submit-btn",onClick:O,disabled:t(c)},[s("i",{class:C(t(c)?"fas fa-spinner fa-spin":"fas fa-check")},null,2),s("span",null,_(t(c)?"جاري التحقق...":"تأكيد"),1)],8,Ns)])])])):k("",!0),t(U)?(m(),u("div",Os,[s("div",Ts,[s("div",Es,[e[41]||(e[41]=s("div",{class:"mg-success-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),e[42]||(e[42]=s("h2",{style:{"margin-bottom":"10px"}},"تم تقديم طلبك بنجاح!",-1)),e[43]||(e[43]=s("p",null,"رقم التتبع الخاص بك:",-1)),s("div",Fs,_(t(S)),1),e[44]||(e[44]=s("p",{style:{"font-size":"0.9rem"}},"احتفظ بهذا الرقم لتتبع طلبك عبر صفحة التتبع",-1)),R(T,{to:"/",class:"mg-submit-btn",style:{"margin-top":"20px","text-decoration":"none"}},{default:A(()=>[...e[40]||(e[40]=[s("i",{class:"fas fa-home"},null,-1),s("span",null,"العودة للرئيسية",-1)])]),_:1})])])])):k("",!0)])}}}),Ps=J(Ds,[["__scopeId","data-v-e28af984"]]);export{Ps as default};
