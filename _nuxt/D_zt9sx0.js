import{_ as G}from"./zYnyYLSZ.js";import{g as K,y as R,x as $,k as j,l as i,B as J,c as r,a as s,q as y,e as Z,m as H,s as u,d as a,v as c,j as t,G as F,F as I,r as N,t as b,n as h,b as Q,w as W,o as d,E as X,_ as Y}from"./C9UcBPGi.js";import{u as ss}from"./CXkqyJB4.js";const es={class:"wu-page"},ts={class:"container"},ls={class:"wu-form-card"},os={class:"wu-form-row"},ns={class:"wu-form-group"},as={class:"wu-form-group"},is={class:"wu-form-row"},rs={class:"wu-form-group"},us={class:"wu-form-group"},ds={class:"wu-form-row"},ps={class:"wu-form-group"},cs={class:"wu-form-group"},fs={class:"wu-file-wrapper"},ms={key:0,class:"wu-preview-container show"},vs=["src"],ws={class:"wu-form-row"},ys={class:"wu-form-group"},bs={class:"wu-form-group"},gs={class:"wu-form-row"},_s={class:"wu-form-group"},ks={key:0,class:"wu-shimmer-select"},xs=["value"],qs={class:"wu-form-group"},Vs={class:"wu-form-row"},Cs={class:"wu-form-group"},Us={class:"wu-amount-wrapper"},Bs={class:"wu-submit-wrapper"},Ms=["disabled"],Ss={key:0,class:"wu-modal-overlay show"},$s={class:"wu-modal"},Fs={class:"wu-modal-body"},Is={class:"wu-otp-wrapper"},Ns=["onUpdate:modelValue","onInput","onKeydown"],hs={key:0,class:"wu-modal-error",style:{display:"block"}},zs=["disabled"],Es={key:1,class:"wu-modal-overlay show"},Os={class:"wu-modal"},Ls={class:"wu-modal-body",style:{padding:"50px 30px","text-align":"center"}},Ps={key:2,class:"wu-modal-overlay show"},Ts={class:"wu-modal"},As={class:"wu-modal-body",style:{"padding-top":"50px"}},Ds={class:"wu-tracking-code"},Gs=K({__name:"transfer",setup(Ks){R({title:"طلب تحويل ويسترن يونيون | الرحالة للصرافة",description:"قم بإرسال الأموال عبر ويسترن يونيون من ليبيا إلى أي مكان في العالم"});const{error:C}=ss(),z=$().public.apiBase,o=j({sender_name:"",sender_country:"",sender_city:"",national_id:"",sender_phone:"",receiver_name_ar:"",receiver_name_en:"",receiver_country:"",receiver_phone:"",amount:""}),_=i(null),g=i(""),U=i([]),k=i(!0),x=i(!1),E=i(""),B=i(!1),m=i(["","","",""]),q=i([]),v=i(""),w=i(!1),M=i(!1),S=i("");J(async()=>{k.value=!0;try{const n=await $fetch(`${z}/western-union/countries`);U.value=n.countries}catch(n){console.error("Failed to load countries",n)}finally{k.value=!1}});const O=n=>{const p=n.target.files?.[0];if(p){if(p.size>5*1024*1024){C("حجم الصورة يجب أن يكون أقل من 5MB");return}_.value=p;const l=new FileReader;l.onload=f=>{g.value=f.target?.result},l.readAsDataURL(p)}},L=()=>{_.value=null,g.value="";const n=document.getElementById("passport_image");n&&(n.value="")},V=i(!1),P=async()=>{if(!_.value){C("يرجى رفع صورة الجواز");return}V.value=!0},T=n=>{m.value[n]&&n<3&&q.value[n+1]?.focus()},A=(n,e)=>{!m.value[n]&&n>0&&q.value[n-1]?.focus()},D=async()=>{const n=m.value.join("");if(n.length!==4){v.value="يرجى إدخال الرمز كاملاً";return}w.value=!0,v.value="";try{const e=$(),p=await $fetch(`${e.public.apiBase}/western-union/verify-otp`,{method:"POST",body:{token:E.value,otp:n}});p.success&&(B.value=!1,S.value=p.tracking_code,M.value=!0)}catch(e){v.value=e.data?.message||"رمز التحقق غير صحيح"}finally{w.value=!1}};return(n,e)=>{const p=G;return d(),r("div",es,[s("div",ts,[e[34]||(e[34]=Z('<div class="wu-header" data-v-c5dcfd90><div class="wu-badge" data-v-c5dcfd90><i class="fas fa-money-bill-transfer" data-v-c5dcfd90></i><span data-v-c5dcfd90>ويسترن يونيون</span></div><h1 class="wu-title" data-v-c5dcfd90>طلب تحويل <span class="gradient-text" data-v-c5dcfd90>ويسترن يونيون</span></h1><p class="wu-subtitle" data-v-c5dcfd90>يرجى ملء جميع البيانات بشكل صحيح لإتمام عملية التحويل</p></div>',1)),s("div",ls,[s("form",{onSubmit:H(P,["prevent"])},[e[31]||(e[31]=s("h3",{class:"wu-section-title"},[s("i",{class:"fas fa-user"}),s("span",null,"معلومات الراسل")],-1)),s("div",os,[s("div",ns,[e[11]||(e[11]=s("label",{class:"wu-label"},[a("اسم الراسل "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).sender_name=l),type:"text",class:"wu-input",required:""},null,512),[[c,t(o).sender_name]])]),s("div",as,[e[13]||(e[13]=s("label",{class:"wu-label"},[a("بلد الراسل "),s("span",{class:"required"},"*")],-1)),u(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).sender_country=l),class:"wu-select",required:""},[...e[12]||(e[12]=[s("option",{value:""},"اختر البلد",-1),s("option",{value:"ليبيا"},"ليبيا",-1)])],512),[[F,t(o).sender_country]])])]),s("div",is,[s("div",rs,[e[14]||(e[14]=s("label",{class:"wu-label"},[a("المدينة "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).sender_city=l),type:"text",class:"wu-input",required:""},null,512),[[c,t(o).sender_city]])]),s("div",us,[e[15]||(e[15]=s("label",{class:"wu-label"},[a("الرقم الوطني (12 رقم) "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).national_id=l),type:"text",class:"wu-input",maxlength:"12",pattern:"[0-9]{12}",required:""},null,512),[[c,t(o).national_id]])])]),s("div",ds,[s("div",ps,[e[16]||(e[16]=s("label",{class:"wu-label"},[a("رقم هاتف الراسل "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).sender_phone=l),type:"tel",class:"wu-input",placeholder:"مثال: 0912345678",required:""},null,512),[[c,t(o).sender_phone]]),e[17]||(e[17]=s("span",{class:"wu-hint"},"أرقام ليبيا أو مصر فقط - سيتم إرسال رمز التحقق عبر الواتساب",-1))]),s("div",cs,[e[20]||(e[20]=s("label",{class:"wu-label"},[a("صورة الجواز "),s("span",{class:"required"},"*")],-1)),s("div",fs,[s("input",{type:"file",class:"wu-file-input",id:"passport_image",onChange:O,accept:"image/*",required:""},null,32),e[18]||(e[18]=s("label",{for:"passport_image",class:"wu-file-label"},[s("i",{class:"fas fa-cloud-upload-alt"}),s("span",{class:"wu-file-text"},"اضغط لرفع صورة الجواز")],-1))]),e[21]||(e[21]=s("span",{class:"wu-hint"},"الصيغ المسموحة: JPG, PNG - الحد الأقصى: 5MB",-1)),t(g)?(d(),r("div",ms,[s("img",{src:t(g),class:"wu-preview-img",alt:"معاينة"},null,8,vs),s("button",{type:"button",class:"wu-preview-remove",onClick:L},[...e[19]||(e[19]=[s("i",{class:"fas fa-times"},null,-1)])])])):y("",!0)])]),e[32]||(e[32]=s("hr",{class:"wu-divider"},null,-1)),e[33]||(e[33]=s("h3",{class:"wu-section-title",style:{color:"#00B17A"}},[s("i",{class:"fas fa-user-check"}),s("span",null,"معلومات المستلم")],-1)),s("div",ws,[s("div",ys,[e[22]||(e[22]=s("label",{class:"wu-label"},[a("اسم المستلم بالكامل (بالعربي) "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).receiver_name_ar=l),type:"text",class:"wu-input",required:""},null,512),[[c,t(o).receiver_name_ar]])]),s("div",bs,[e[23]||(e[23]=s("label",{class:"wu-label"},[a("اسم المستلم بالكامل (بالإنجليزي) "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).receiver_name_en=l),type:"text",class:"wu-input",pattern:"[a-zA-Z\\s]+",required:""},null,512),[[c,t(o).receiver_name_en]]),e[24]||(e[24]=s("span",{class:"wu-hint"},"حروف إنجليزية فقط",-1))])]),s("div",gs,[s("div",_s,[e[27]||(e[27]=s("label",{class:"wu-label"},[a("بلد المستلم "),s("span",{class:"required"},"*")],-1)),t(k)?(d(),r("div",ks,[...e[25]||(e[25]=[s("div",{class:"shimmer-animation"},null,-1)])])):u((d(),r("select",{key:1,"onUpdate:modelValue":e[7]||(e[7]=l=>t(o).receiver_country=l),class:"wu-select",required:""},[e[26]||(e[26]=s("option",{value:""},"اختر البلد",-1)),(d(!0),r(I,null,N(t(U),l=>(d(),r("option",{key:l,value:l},b(l),9,xs))),128))],512)),[[F,t(o).receiver_country]])]),s("div",qs,[e[28]||(e[28]=s("label",{class:"wu-label"},[a("رقم هاتف المستلم "),s("span",{class:"required"},"*")],-1)),u(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>t(o).receiver_phone=l),type:"tel",class:"wu-input",required:""},null,512),[[c,t(o).receiver_phone]])])]),s("div",Vs,[s("div",Cs,[e[30]||(e[30]=s("label",{class:"wu-label"},[a("المبلغ بالدولار ($) "),s("span",{class:"required"},"*")],-1)),s("div",Us,[e[29]||(e[29]=s("span",{class:"wu-amount-prefix"},"$",-1)),u(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t(o).amount=l),type:"number",class:"wu-input wu-amount-input",min:"1",step:"0.01",required:""},null,512),[[c,t(o).amount]])])])]),s("div",Bs,[s("button",{type:"submit",class:"wu-submit-btn",disabled:t(x)},[s("span",null,b(t(x)?"جاري الإرسال...":"التالي"),1),s("i",{class:h(t(x)?"fas fa-spinner fa-spin":"fas fa-arrow-left")},null,2)],8,Ms)])],32)])]),t(B)?(d(),r("div",Ss,[s("div",$s,[e[36]||(e[36]=s("div",{class:"wu-modal-header"},[s("i",{class:"fas fa-shield-halved"}),s("h3",null,"التحقق من رقم الهاتف")],-1)),s("div",Fs,[e[35]||(e[35]=s("p",null,[a("تم إرسال رمز التحقق إلى رقم هاتفك عبر الواتساب"),s("br"),a("أدخل الرمز المكون من 4 أرقام")],-1)),s("div",Is,[(d(),r(I,null,N(4,l=>u(s("input",{key:l,ref_for:!0,ref:f=>t(q)[l-1]=f,"onUpdate:modelValue":f=>t(m)[l-1]=f,type:"text",class:"wu-otp-input",maxlength:"1",onInput:f=>T(l-1),onKeydown:X(f=>A(l-1),["backspace"])},null,40,Ns),[[c,t(m)[l-1]]])),64))]),t(v)?(d(),r("div",hs,b(t(v)),1)):y("",!0),s("button",{type:"button",class:"wu-submit-btn",onClick:D,disabled:t(w)},[s("i",{class:h(t(w)?"fas fa-spinner fa-spin":"fas fa-check")},null,2),s("span",null,b(t(w)?"جاري التحقق...":"تأكيد"),1)],8,zs)])])])):y("",!0),t(V)?(d(),r("div",Es,[s("div",Os,[s("div",Ls,[e[38]||(e[38]=s("div",{class:"wu-success-icon",style:{color:"#ffc107"}},[s("i",{class:"fas fa-clock"})],-1)),e[39]||(e[39]=s("h2",{style:{"margin-bottom":"15px",color:"var(--text-primary)"}},"الخدمة قيد التطوير",-1)),e[40]||(e[40]=s("p",{style:{color:"var(--text-secondary)","font-size":"1.1rem","margin-bottom":"25px"}},[a(" خدمة ويسترن يونيون ستكون متاحة قريباً!"),s("br"),a(" شكراً لصبركم. ")],-1)),s("button",{type:"button",class:"wu-submit-btn",onClick:e[10]||(e[10]=l=>V.value=!1),style:{background:"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)"}},[...e[37]||(e[37]=[s("i",{class:"fas fa-arrow-right"},null,-1),s("span",null,"رجوع",-1)])])])])])):y("",!0),t(M)?(d(),r("div",Ps,[s("div",Ts,[s("div",As,[e[42]||(e[42]=s("div",{class:"wu-success-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),e[43]||(e[43]=s("h2",{style:{"margin-bottom":"10px"}},"تم تقديم طلبك بنجاح!",-1)),e[44]||(e[44]=s("p",null,"رقم التتبع الخاص بك:",-1)),s("div",Ds,b(t(S)),1),e[45]||(e[45]=s("p",{style:{"font-size":"0.9rem"}},"احتفظ بهذا الرقم لتتبع طلبك",-1)),Q(p,{to:"/",class:"wu-submit-btn",style:{"margin-top":"20px","text-decoration":"none"}},{default:W(()=>[...e[41]||(e[41]=[s("i",{class:"fas fa-home"},null,-1),s("span",null,"العودة للرئيسية",-1)])]),_:1})])])])):y("",!0)])}}}),Hs=Y(Gs,[["__scopeId","data-v-c5dcfd90"]]);export{Hs as default};
