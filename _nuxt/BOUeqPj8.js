import{_ as E}from"./BgabLAuh.js";import{g as T,y as j,x as G,k as x,l as u,c as d,a as t,q as b,e as I,m as R,d as p,s as m,v as g,j as l,G as z,n as y,F as q,t as h,b as P,w as S,o as r,_ as L}from"./Ci43LGyf.js";import{u as O}from"./CSyoYhtS.js";const W={class:"booking-page"},A={class:"container"},J={class:"form-card"},H={class:"form-section"},K={class:"form-row"},Q={class:"form-group"},X={class:"form-group"},Y={class:"form-row"},Z={class:"form-group"},ss={class:"form-group"},ts={class:"form-row"},ls={class:"form-group"},as={class:"form-group"},os={class:"form-section"},es={class:"file-grid"},ns={class:"form-group"},is={for:"passport_photo",class:"file-label"},ds={key:1,class:"pdf-preview"},rs=["src"],ps={class:"form-group"},us={for:"voucher_photo",class:"file-label"},fs={key:1,class:"pdf-preview"},ms=["src"],cs={class:"form-group"},vs={for:"national_id_photo",class:"file-label"},bs={key:1,class:"pdf-preview"},gs=["src"],ys={class:"form-group"},_s={for:"additional_photo",class:"file-label"},ks={key:1,class:"pdf-preview"},ws=["src"],qs={class:"submit-wrapper"},xs=["disabled"],Fs={key:0,class:"modal-overlay show"},Cs={class:"modal"},Ds={class:"modal-body success-body"},hs={class:"tracking-code-display"},Ps={class:"success-actions"},Ss=T({__name:"index",setup(Vs){j({title:"حجز بطاقة أغراض شخصية | شركة الرحالة",description:"خدمة حجز بطاقات الأغراض الشخصية للمواطنين عبر شركة الرحالة للصرافة"});const{success:V,error:c}=O(),B=G().public.apiBase,e=x({name:"",phone:"",national_id:"",payment_type:"",account_number:"",booking_amount:""}),i=x({passport:null,voucher:null,national_id:null,additional:null}),n=x({passport:"",voucher:"",national_id:"",additional:""}),v=u(!1);u(""),u(!1);const M=u(["","","",""]);u([]),u(""),u(!1);const F=u(!1),C=u(""),_=(o,s)=>{const a=o.target.files?.[0];if(a&&(a.type.startsWith("image/")||a.type==="application/pdf")){if(a.size>10*1024*1024){c("حجم الملف يجب أن يكون أقل من 10MB");return}if(i[s]=a,a.type.startsWith("image/")){const D=new FileReader;D.onload=$=>{n[s]=$.target?.result},D.readAsDataURL(a)}else n[s]="pdf"}},k=o=>i[o]?.type==="application/pdf",w=o=>{i[o]=null,n[o]="";const s=document.getElementById(`${o}_photo`);s&&(s.value="")},N=async()=>{if(!i.passport||!i.voucher||!i.national_id){c("يرجى رفع المستندات الأساسية المطلوبة");return}if(Number(e.booking_amount)>2e3){c("قيمة الحجز لا يمكن أن تتجاوز 2000 دولار");return}v.value=!0;try{const o=new FormData;o.append("name",e.name),o.append("phone",e.phone),o.append("national_id",e.national_id),o.append("payment_type",e.payment_type.toString()),o.append("account_number",e.account_number),o.append("booking_amount",e.booking_amount),i.passport&&o.append("passport_photo",i.passport),i.voucher&&o.append("voucher_photo",i.voucher),i.national_id&&o.append("national_id_photo",i.national_id),i.additional&&o.append("additional_photo",i.additional);const s=await $fetch(`${B}/booking-cards/store`,{method:"POST",body:o});s.success&&(C.value=s.tracking_code,F.value=!0,V("تم تقديم طلب حجز البطاقة بنجاح"),U())}catch(o){if(console.error("Step 1 failed:",o.data||o),o.data?.errors){const s=Object.values(o.data.errors).flat().join(`
`);c(s)}else c(o.data?.message||"حدث خطأ أثناء إرسال البيانات")}finally{v.value=!1}},U=()=>{e.name="",e.phone="",e.national_id="",e.payment_type="",e.account_number="",e.booking_amount="",i.passport=null,i.voucher=null,i.national_id=null,i.additional=null,n.passport="",n.voucher="",n.national_id="",n.additional="",M.value=["","","",""],["passport_photo","voucher_photo","national_id_photo","additional_photo"].forEach(s=>{const f=document.getElementById(s);f&&(f.value="")})};return(o,s)=>{const f=E;return r(),d("div",W,[t("div",A,[s[47]||(s[47]=I('<div class="page-header" data-v-3c6ed5db><div class="header-badge" data-v-3c6ed5db><i class="fas fa-id-card" data-v-3c6ed5db></i><span data-v-3c6ed5db>شركة الرحالة للصرافة والخدمات المالية</span></div><h1 class="page-title" data-v-3c6ed5db>منصة الرحالة للصرفة <span class="gradient-text" data-v-3c6ed5db>‏ مخصصة لرفع البيانات الشخصية وقسيمة الإيداع</span></h1><p class="page-subtitle" data-v-3c6ed5db>يرجى ملء البيانات بدقة ورفع المستندات المطلوبة (صور أو PDF بحد أقصى 10 ميجا)</p></div>',1)),t("div",J,[t("form",{onSubmit:R(N,["prevent"])},[s[44]||(s[44]=t("div",{class:"status-alert warning"},[t("i",{class:"fas fa-university"}),t("span",null,[p("رقم حساب الشركة : "),t("strong",null,"122012276814011")])],-1)),t("div",H,[s[21]||(s[21]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-user-edit"}),t("span",null,"المعلومات الشخصية")],-1)),t("div",K,[t("div",Q,[s[14]||(s[14]=t("label",{class:"label"},[p("الإسم بالكامل "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>l(e).name=a),type:"text",class:"input",placeholder:"أدخل اسمك كما هو في الجواز",required:""},null,512),[[g,l(e).name]])]),t("div",X,[s[15]||(s[15]=t("label",{class:"label"},[p("الرقم الوطني (12 رقم) "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>l(e).national_id=a),type:"text",class:"input",maxlength:"12",inputmode:"numeric",pattern:"[0-9]{12}",placeholder:"مثال: 119900123456",required:""},null,512),[[g,l(e).national_id]])])]),t("div",Y,[t("div",Z,[s[16]||(s[16]=t("label",{class:"label"},[p("رقم الهاتف "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>l(e).phone=a),type:"tel",class:"input",placeholder:"مثال: 0912345678",required:""},null,512),[[g,l(e).phone]])]),t("div",ss,[s[18]||(s[18]=t("label",{class:"label"},[p("نوع الدفع "),t("span",{class:"required"},"*")],-1)),m(t("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>l(e).payment_type=a),class:"input select-input",required:""},[...s[17]||(s[17]=[t("option",{value:"",disabled:"",selected:""},"اختر نوع الدفع",-1),t("option",{value:0},"نقدي",-1),t("option",{value:1},"مصرف",-1)])],512),[[z,l(e).payment_type]])])]),t("div",ts,[t("div",ls,[s[19]||(s[19]=t("label",{class:"label"},[p("رقم الحساب "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>l(e).account_number=a),type:"text",class:"input",inputmode:"numeric",placeholder:"أدخل رقم الحساب الجاري",required:""},null,512),[[g,l(e).account_number]])]),t("div",as,[s[20]||(s[20]=t("label",{class:"label"},[p("قيمة الحجز بالدولار "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>l(e).booking_amount=a),type:"number",step:"0.01",class:"input",placeholder:"مثال: 100",required:""},null,512),[[g,l(e).booking_amount]])])])]),s[45]||(s[45]=t("hr",{class:"divider"},null,-1)),t("div",os,[s[42]||(s[42]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-file-invoice"}),t("span",null,"المستندات المطلوبة")],-1)),t("div",es,[t("div",ns,[s[26]||(s[26]=t("label",{class:"label"},[p("صورة جواز السفر "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(n).passport}])},[t("input",{type:"file",id:"passport_photo",class:"file-input",onChange:s[6]||(s[6]=a=>_(a,"passport")),accept:"image/*,.pdf",required:""},null,32),t("label",is,[l(n).passport?k("passport")?(r(),d("div",ds,[...s[24]||(s[24]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(r(),d("img",{key:2,src:l(n).passport,class:"preview-img"},null,8,rs)):(r(),d(q,{key:0},[s[22]||(s[22]=t("i",{class:"fas fa-file-upload"},null,-1)),s[23]||(s[23]=t("span",null,"رفع الجواز (صورة أو PDF)",-1))],64))]),l(n).passport?(r(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[7]||(s[7]=a=>w("passport"))},[...s[25]||(s[25]=[t("i",{class:"fas fa-times"},null,-1)])])):b("",!0)],2)]),t("div",ps,[s[31]||(s[31]=t("label",{class:"label"},[p("صورة القسيمة "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(n).voucher}])},[t("input",{type:"file",id:"voucher_photo",class:"file-input",onChange:s[8]||(s[8]=a=>_(a,"voucher")),accept:"image/*,.pdf",required:""},null,32),t("label",us,[l(n).voucher?k("voucher")?(r(),d("div",fs,[...s[29]||(s[29]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(r(),d("img",{key:2,src:l(n).voucher,class:"preview-img"},null,8,ms)):(r(),d(q,{key:0},[s[27]||(s[27]=t("i",{class:"fas fa-receipt"},null,-1)),s[28]||(s[28]=t("span",null,"رفع القسيمة (صورة أو PDF)",-1))],64))]),l(n).voucher?(r(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[9]||(s[9]=a=>w("voucher"))},[...s[30]||(s[30]=[t("i",{class:"fas fa-times"},null,-1)])])):b("",!0)],2)]),t("div",cs,[s[36]||(s[36]=t("label",{class:"label"},[p("صورة الرقم الوطني "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(n).national_id}])},[t("input",{type:"file",id:"national_id_photo",class:"file-input",onChange:s[10]||(s[10]=a=>_(a,"national_id")),accept:"image/*,.pdf",required:""},null,32),t("label",vs,[l(n).national_id?k("national_id")?(r(),d("div",bs,[...s[34]||(s[34]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(r(),d("img",{key:2,src:l(n).national_id,class:"preview-img"},null,8,gs)):(r(),d(q,{key:0},[s[32]||(s[32]=t("i",{class:"fas fa-address-card"},null,-1)),s[33]||(s[33]=t("span",null,"رفع الرقم الوطني (صورة أو PDF)",-1))],64))]),l(n).national_id?(r(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[11]||(s[11]=a=>w("national_id"))},[...s[35]||(s[35]=[t("i",{class:"fas fa-times"},null,-1)])])):b("",!0)],2)]),t("div",ys,[s[41]||(s[41]=t("label",{class:"label"},"صورة إضافية (اختياري)",-1)),t("div",{class:y(["file-wrapper",{"has-file":l(n).additional}])},[t("input",{type:"file",id:"additional_photo",class:"file-input",onChange:s[12]||(s[12]=a=>_(a,"additional")),accept:"image/*,.pdf"},null,32),t("label",_s,[l(n).additional?k("additional")?(r(),d("div",ks,[...s[39]||(s[39]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(r(),d("img",{key:2,src:l(n).additional,class:"preview-img"},null,8,ws)):(r(),d(q,{key:0},[s[37]||(s[37]=t("i",{class:"fas fa-plus-circle"},null,-1)),s[38]||(s[38]=t("span",null,"رفع مستند إضافي",-1))],64))]),l(n).additional?(r(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[13]||(s[13]=a=>w("additional"))},[...s[40]||(s[40]=[t("i",{class:"fas fa-times"},null,-1)])])):b("",!0)],2)])]),s[43]||(s[43]=t("p",{class:"hint files-hint"},"الصيغ المسموحة: JPG, PNG, PDF - الحد الأقصى لكل ملف: 10MB",-1))]),s[46]||(s[46]=t("div",{class:"status-alert warning bottom-alert"},[t("i",{class:"fas fa-exclamation-triangle"}),t("span",null,"يرجى التأكد من ان التحويل المالي تم من نفس حساب صاحب البطاقه إلى حساب الشركة المذكور أعلاه")],-1)),t("div",qs,[t("button",{type:"submit",class:"submit-btn",disabled:l(v)},[t("span",null,h(l(v)?"جاري المعالجة...":"ارسال المرفقات"),1),t("i",{class:y(l(v)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,xs)])],32)])]),l(F)?(r(),d("div",Fs,[t("div",Cs,[t("div",Ds,[s[50]||(s[50]=t("div",{class:"success-icon"},[t("i",{class:"fas fa-check-circle"})],-1)),s[51]||(s[51]=t("h2",null,"تم تقديم طلبك بنجاح!",-1)),s[52]||(s[52]=t("p",null,"رقم تتبع الحجز الخاص بك:",-1)),t("div",hs,h(l(C)),1),s[53]||(s[53]=t("p",{class:"hint"},"احتفظ بهذا الرقم لتتبع حالة حجزك لاحقاً",-1)),t("div",Ps,[P(f,{to:"/",class:"submit-btn secondary"},{default:S(()=>[...s[48]||(s[48]=[t("i",{class:"fas fa-home"},null,-1),t("span",null,"الرئيسية",-1)])]),_:1}),P(f,{to:"/booking-cards/track",class:"submit-btn"},{default:S(()=>[...s[49]||(s[49]=[t("i",{class:"fas fa-search"},null,-1),t("span",null,"تتبع الطلب",-1)])]),_:1})])])])])):b("",!0)])}}}),$s=L(Ss,[["__scopeId","data-v-3c6ed5db"]]);export{$s as default};
