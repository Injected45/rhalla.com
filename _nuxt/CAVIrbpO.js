import{g as E,y as T,x as j,k as F,l as u,c as d,a as t,q as g,e as G,m as I,s as m,d as f,v as _,j as l,b as h,w as C,G as O,n as y,F as x,t as S,i as R,o as p,_ as z}from"./c-da_mGK.js";import{_ as L}from"./CcDT8H_6.js";import{u as W}from"./BeIaw6VX.js";const A={class:"booking-page"},J={class:"container"},H={class:"form-card"},K={class:"form-section"},Q={class:"form-row"},X={class:"form-group"},Y={class:"form-group"},Z={class:"form-row"},ss={class:"form-group"},ts={class:"form-group"},ls={class:"form-row"},as={class:"form-group"},os={class:"form-group"},ns={class:"form-section"},es={class:"file-grid"},is={class:"form-group"},ds={for:"passport_photo",class:"file-label"},ps={key:1,class:"pdf-preview"},rs=["src"],us={class:"form-group"},fs={for:"voucher_photo",class:"file-label"},ms={key:1,class:"pdf-preview"},cs=["src"],vs={class:"form-group"},bs={for:"national_id_photo",class:"file-label"},gs={key:1,class:"pdf-preview"},_s=["src"],ys={class:"form-group"},ks={for:"additional_photo",class:"file-label"},ws={key:1,class:"pdf-preview"},qs=["src"],xs={class:"submit-wrapper"},Fs=["disabled"],hs={key:0,class:"modal-overlay show"},Cs={class:"modal"},Ds={class:"modal-body success-body"},Ps={class:"tracking-code-display"},Ss={class:"success-actions"},Vs=E({__name:"index",setup(Bs){T({title:"حجز بطاقة أغراض شخصية | شركة الرحالة",description:"خدمة حجز بطاقات الأغراض الشخصية للمواطنين عبر شركة الرحالة للصرافة"});const{success:V,error:c}=W(),B=j().public.apiBase,n=F({name:"",phone:"",national_id:"",payment_type:"",account_number:"",booking_amount:""}),i=F({passport:null,voucher:null,national_id:null,additional:null}),e=F({passport:"",voucher:"",national_id:"",additional:""}),v=u(!1);u(""),u(!1);const M=u(["","","",""]);u([]),u(""),u(!1);const D=u(!1),P=u(""),k=(a,s)=>{const r=a.target.files?.[0];if(r&&(r.type.startsWith("image/")||r.type==="application/pdf")){if(r.size>10*1024*1024){c("حجم الملف يجب أن يكون أقل من 10MB");return}if(i[s]=r,r.type.startsWith("image/")){const o=new FileReader;o.onload=$=>{e[s]=$.target?.result},o.readAsDataURL(r)}else e[s]="pdf"}},w=a=>i[a]?.type==="application/pdf",q=a=>{i[a]=null,e[a]="";const s=document.getElementById(`${a}_photo`);s&&(s.value="")},N=async()=>{if(!i.passport||!i.voucher||!i.national_id){c("يرجى رفع المستندات الأساسية المطلوبة");return}if(Number(n.booking_amount)>2e3){c("قيمة الحجز لا يمكن أن تتجاوز 2000 دولار");return}v.value=!0;try{const a=new FormData;a.append("name",n.name),a.append("phone",n.phone),a.append("national_id",n.national_id),a.append("payment_type",n.payment_type.toString()),a.append("account_number",n.account_number),a.append("booking_amount",n.booking_amount),i.passport&&a.append("passport_photo",i.passport),i.voucher&&a.append("voucher_photo",i.voucher),i.national_id&&a.append("national_id_photo",i.national_id),i.additional&&a.append("additional_photo",i.additional);const s=await $fetch(`${B}/booking-cards/store`,{method:"POST",body:a});s.success&&(P.value=s.tracking_code,D.value=!0,V("تم تقديم طلب حجز البطاقة بنجاح"),U())}catch(a){if(console.error("Step 1 failed:",a.data||a),a.data?.errors){const s=Object.values(a.data.errors).flat().join(`
`);c(s)}else c(a.data?.message||"حدث خطأ أثناء إرسال البيانات")}finally{v.value=!1}},U=()=>{n.name="",n.phone="",n.national_id="",n.payment_type="",n.account_number="",n.booking_amount="",i.passport=null,i.voucher=null,i.national_id=null,i.additional=null,e.passport="",e.voucher="",e.national_id="",e.additional="",M.value=["","","",""],["passport_photo","voucher_photo","national_id_photo","additional_photo"].forEach(s=>{const b=document.getElementById(s);b&&(b.value="")})};return(a,s)=>{const b=R,r=L;return p(),d("div",A,[t("div",J,[s[46]||(s[46]=G('<div class="page-header" data-v-b40f3205><div class="header-badge" data-v-b40f3205><i class="fas fa-id-card" data-v-b40f3205></i><span data-v-b40f3205>شركة الرحالة للصرافة والخدمات المالية</span></div><h1 class="page-title" data-v-b40f3205>تقديم طلب للموافقه علي <span class="gradient-text" data-v-b40f3205>شحن بطاقة الأغراض الشخصية</span></h1><p class="page-subtitle" data-v-b40f3205>يرجى ملء البيانات بدقة ورفع المستندات المطلوبة (صور أو PDF بحد أقصى 10 ميجا)</p></div>',1)),t("div",H,[t("form",{onSubmit:I(N,["prevent"])},[t("div",K,[s[22]||(s[22]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-user-edit"}),t("span",null,"المعلومات الشخصية")],-1)),t("div",Q,[t("div",X,[s[14]||(s[14]=t("label",{class:"label"},[f("الإسم بالكامل "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>l(n).name=o),type:"text",class:"input",placeholder:"أدخل اسمك كما هو في الجواز",required:""},null,512),[[_,l(n).name]])]),t("div",Y,[s[15]||(s[15]=t("label",{class:"label"},[f("الرقم الوطني (12 رقم) "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>l(n).national_id=o),type:"text",class:"input",maxlength:"12",inputmode:"numeric",pattern:"[0-9]{12}",placeholder:"مثال: 119900123456",required:""},null,512),[[_,l(n).national_id]])])]),t("div",Z,[t("div",ss,[s[17]||(s[17]=t("label",{class:"label"},[f("رقم الهاتف "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>l(n).phone=o),type:"tel",class:"input",placeholder:"مثال: 0912345678",required:""},null,512),[[_,l(n).phone]]),h(b,null,{default:C(()=>[...s[16]||(s[16]=[t("span",{class:"hint"},"يدعم الأرقام الليبية والمصرية - سيتم إرسال الرمز عبر الواتساب",-1)])]),_:1})]),t("div",ts,[s[19]||(s[19]=t("label",{class:"label"},[f("نوع الدفع "),t("span",{class:"required"},"*")],-1)),m(t("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>l(n).payment_type=o),class:"input select-input",required:""},[...s[18]||(s[18]=[t("option",{value:"",disabled:"",selected:""},"اختر نوع الدفع",-1),t("option",{value:0},"نقدي",-1),t("option",{value:1},"مصرف",-1)])],512),[[O,l(n).payment_type]])])]),t("div",ls,[t("div",as,[s[20]||(s[20]=t("label",{class:"label"},[f("رقم الحساب "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>l(n).account_number=o),type:"text",class:"input",inputmode:"numeric",placeholder:"أدخل رقم الحساب الجاري",required:""},null,512),[[_,l(n).account_number]])]),t("div",os,[s[21]||(s[21]=t("label",{class:"label"},[f("قيمة الحجز بالدولار "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>l(n).booking_amount=o),type:"number",step:"0.01",class:"input",placeholder:"مثال: 100",required:""},null,512),[[_,l(n).booking_amount]])])])]),s[45]||(s[45]=t("hr",{class:"divider"},null,-1)),t("div",ns,[s[43]||(s[43]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-file-invoice"}),t("span",null,"المستندات المطلوبة")],-1)),t("div",es,[t("div",is,[s[27]||(s[27]=t("label",{class:"label"},[f("صورة جواز السفر "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).passport}])},[t("input",{type:"file",id:"passport_photo",class:"file-input",onChange:s[6]||(s[6]=o=>k(o,"passport")),accept:"image/*,.pdf",required:""},null,32),t("label",ds,[l(e).passport?w("passport")?(p(),d("div",ps,[...s[25]||(s[25]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(p(),d("img",{key:2,src:l(e).passport,class:"preview-img"},null,8,rs)):(p(),d(x,{key:0},[s[23]||(s[23]=t("i",{class:"fas fa-file-upload"},null,-1)),s[24]||(s[24]=t("span",null,"رفع الجواز (صورة أو PDF)",-1))],64))]),l(e).passport?(p(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[7]||(s[7]=o=>q("passport"))},[...s[26]||(s[26]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),t("div",us,[s[32]||(s[32]=t("label",{class:"label"},[f("صورة القسيمة "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).voucher}])},[t("input",{type:"file",id:"voucher_photo",class:"file-input",onChange:s[8]||(s[8]=o=>k(o,"voucher")),accept:"image/*,.pdf",required:""},null,32),t("label",fs,[l(e).voucher?w("voucher")?(p(),d("div",ms,[...s[30]||(s[30]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(p(),d("img",{key:2,src:l(e).voucher,class:"preview-img"},null,8,cs)):(p(),d(x,{key:0},[s[28]||(s[28]=t("i",{class:"fas fa-receipt"},null,-1)),s[29]||(s[29]=t("span",null,"رفع القسيمة (صورة أو PDF)",-1))],64))]),l(e).voucher?(p(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[9]||(s[9]=o=>q("voucher"))},[...s[31]||(s[31]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),t("div",vs,[s[37]||(s[37]=t("label",{class:"label"},[f("صورة الرقم الوطني "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).national_id}])},[t("input",{type:"file",id:"national_id_photo",class:"file-input",onChange:s[10]||(s[10]=o=>k(o,"national_id")),accept:"image/*,.pdf",required:""},null,32),t("label",bs,[l(e).national_id?w("national_id")?(p(),d("div",gs,[...s[35]||(s[35]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(p(),d("img",{key:2,src:l(e).national_id,class:"preview-img"},null,8,_s)):(p(),d(x,{key:0},[s[33]||(s[33]=t("i",{class:"fas fa-address-card"},null,-1)),s[34]||(s[34]=t("span",null,"رفع الرقم الوطني (صورة أو PDF)",-1))],64))]),l(e).national_id?(p(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[11]||(s[11]=o=>q("national_id"))},[...s[36]||(s[36]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),t("div",ys,[s[42]||(s[42]=t("label",{class:"label"},"صورة إضافية (اختياري)",-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).additional}])},[t("input",{type:"file",id:"additional_photo",class:"file-input",onChange:s[12]||(s[12]=o=>k(o,"additional")),accept:"image/*,.pdf"},null,32),t("label",ks,[l(e).additional?w("additional")?(p(),d("div",ws,[...s[40]||(s[40]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(p(),d("img",{key:2,src:l(e).additional,class:"preview-img"},null,8,qs)):(p(),d(x,{key:0},[s[38]||(s[38]=t("i",{class:"fas fa-plus-circle"},null,-1)),s[39]||(s[39]=t("span",null,"رفع مستند إضافي",-1))],64))]),l(e).additional?(p(),d("button",{key:0,type:"button",class:"remove-btn",onClick:s[13]||(s[13]=o=>q("additional"))},[...s[41]||(s[41]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)])]),s[44]||(s[44]=t("p",{class:"hint files-hint"},"الصيغ المسموحة: JPG, PNG, PDF - الحد الأقصى لكل ملف: 10MB",-1))]),t("div",xs,[t("button",{type:"submit",class:"submit-btn",disabled:l(v)},[t("span",null,S(l(v)?"جاري المعالجة...":"إرسال طلب الحجز"),1),t("i",{class:y(l(v)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,Fs)])],32)])]),l(D)?(p(),d("div",hs,[t("div",Cs,[t("div",Ds,[s[49]||(s[49]=t("div",{class:"success-icon"},[t("i",{class:"fas fa-check-circle"})],-1)),s[50]||(s[50]=t("h2",null,"تم تقديم طلبك بنجاح!",-1)),s[51]||(s[51]=t("p",null,"رقم تتبع الحجز الخاص بك:",-1)),t("div",Ps,S(l(P)),1),s[52]||(s[52]=t("p",{class:"hint"},"احتفظ بهذا الرقم لتتبع حالة حجزك لاحقاً",-1)),t("div",Ss,[h(r,{to:"/",class:"submit-btn secondary"},{default:C(()=>[...s[47]||(s[47]=[t("i",{class:"fas fa-home"},null,-1),t("span",null,"الرئيسية",-1)])]),_:1}),h(r,{to:"/booking-cards/track",class:"submit-btn"},{default:C(()=>[...s[48]||(s[48]=[t("i",{class:"fas fa-search"},null,-1),t("span",null,"تتبع الطلب",-1)])]),_:1})])])])])):g("",!0)])}}}),Es=z(Vs,[["__scopeId","data-v-b40f3205"]]);export{Es as default};
