import{g as T,y as j,H as G,x as I,k as C,l as f,c as r,a as t,q as g,d as p,b as F,w as D,m as O,s as m,v as _,j as l,G as R,n as y,F as x,t as B,i as z,o as d,_ as L}from"./BRXqJ4ao.js";import{_ as W}from"./DlKLoofn.js";import{u as A}from"./CrwG-gL0.js";const H={class:"booking-page"},J={class:"container"},K={class:"page-header"},Q={class:"bank-logo-wrapper"},X=["src"],Y={class:"form-card"},Z={class:"form-section"},ss={class:"form-row"},ts={class:"form-group"},ls={class:"form-group"},ns={class:"form-row"},os={class:"form-group"},as={class:"form-group"},es={class:"form-row"},is={class:"form-group"},rs={class:"form-group"},ds={class:"form-section"},ps={class:"file-grid"},us={class:"form-group"},fs={for:"passport_photo",class:"file-label"},ms={key:1,class:"pdf-preview"},cs=["src"],vs={class:"form-group"},bs={for:"voucher_photo",class:"file-label"},gs={key:1,class:"pdf-preview"},_s=["src"],ys={class:"form-group"},ks={for:"national_id_photo",class:"file-label"},ws={key:1,class:"pdf-preview"},qs=["src"],xs={class:"form-group"},Cs={for:"additional_photo",class:"file-label"},Fs={key:1,class:"pdf-preview"},Ds=["src"],hs={class:"submit-wrapper"},Ps=["disabled"],Bs={key:0,class:"modal-overlay show"},Ss={class:"modal"},Vs={class:"modal-body success-body"},Ms={class:"tracking-code-display"},Ns={class:"success-actions"},Us=T({__name:"index",setup($s){j({title:"حجز بطاقة أغراض شخصية | شركة الرحالة",description:"خدمة حجز بطاقات الأغراض الشخصية للمواطنين عبر شركة الرحالة للصرافة"});const{isDark:S}=G(),{success:V,error:c}=A(),M=I().public.apiBase,a=C({name:"",phone:"",national_id:"",payment_type:"",account_number:"",booking_amount:""}),i=C({passport:null,voucher:null,national_id:null,additional:null}),e=C({passport:"",voucher:"",national_id:"",additional:""}),v=f(!1);f(""),f(!1);const N=f(["","","",""]);f([]),f(""),f(!1);const h=f(!1),P=f(""),k=(n,s)=>{const u=n.target.files?.[0];if(u&&(u.type.startsWith("image/")||u.type==="application/pdf")){if(u.size>10*1024*1024){c("حجم الملف يجب أن يكون أقل من 10MB");return}if(i[s]=u,u.type.startsWith("image/")){const o=new FileReader;o.onload=E=>{e[s]=E.target?.result},o.readAsDataURL(u)}else e[s]="pdf"}},w=n=>i[n]?.type==="application/pdf",q=n=>{i[n]=null,e[n]="";const s=document.getElementById(`${n}_photo`);s&&(s.value="")},U=async()=>{if(!i.passport||!i.voucher||!i.national_id){c("يرجى رفع المستندات الأساسية المطلوبة");return}if(Number(a.booking_amount)>2e3){c("قيمة الحجز لا يمكن أن تتجاوز 2000 دولار");return}v.value=!0;try{const n=new FormData;n.append("name",a.name),n.append("phone",a.phone),n.append("national_id",a.national_id),n.append("payment_type",a.payment_type.toString()),n.append("account_number",a.account_number),n.append("booking_amount",a.booking_amount),i.passport&&n.append("passport_photo",i.passport),i.voucher&&n.append("voucher_photo",i.voucher),i.national_id&&n.append("national_id_photo",i.national_id),i.additional&&n.append("additional_photo",i.additional);const s=await $fetch(`${M}/booking-cards/store`,{method:"POST",body:n});s.success&&(P.value=s.tracking_code,h.value=!0,V("تم تقديم طلب حجز البطاقة بنجاح"),$())}catch(n){if(console.error("Step 1 failed:",n.data||n),n.data?.errors){const s=Object.values(n.data.errors).flat().join(`
`);c(s)}else c(n.data?.message||"حدث خطأ أثناء إرسال البيانات")}finally{v.value=!1}},$=()=>{a.name="",a.phone="",a.national_id="",a.payment_type="",a.account_number="",a.booking_amount="",i.passport=null,i.voucher=null,i.national_id=null,i.additional=null,e.passport="",e.voucher="",e.national_id="",e.additional="",N.value=["","","",""],["passport_photo","voucher_photo","national_id_photo","additional_photo"].forEach(s=>{const b=document.getElementById(s);b&&(b.value="")})};return(n,s)=>{const b=z,u=W;return d(),r("div",H,[t("div",J,[t("div",K,[s[14]||(s[14]=t("div",{class:"header-badge"},[t("i",{class:"fas fa-id-card"}),t("span",null,"شركة الرحالة للصرافة والخدمات المالية")],-1)),s[15]||(s[15]=t("h1",{class:"page-title"},[p("منصة الرحالة للصرفة "),t("span",{class:"gradient-text"},"مخصصه لزبائن المصرف التجاري الوطني")],-1)),t("div",Q,[F(b,null,{default:D(()=>[t("img",{src:l(S)?"/images/ncb-dark.png":"/images/ncb-light.png",alt:"National Commercial Bank",class:"bank-logo"},null,8,X)]),_:1})]),s[16]||(s[16]=t("p",{class:"page-subtitle"},"يرجى ملء البيانات بدقة ورفع المستندات المطلوبة (صور أو PDF بحد أقصى 10 ميجا)",-1))]),t("div",Y,[t("form",{onSubmit:O(U,["prevent"])},[s[47]||(s[47]=t("div",{class:"status-alert warning"},[t("i",{class:"fas fa-university"}),t("span",null,[p("رقم حساب الشركة : "),t("strong",null,"122012276814011")])],-1)),t("div",Z,[s[24]||(s[24]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-user-edit"}),t("span",null,"المعلومات الشخصية")],-1)),t("div",ss,[t("div",ts,[s[17]||(s[17]=t("label",{class:"label"},[p("الإسم بالكامل "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>l(a).name=o),type:"text",class:"input",placeholder:"أدخل اسمك كما هو في الجواز",required:""},null,512),[[_,l(a).name]])]),t("div",ls,[s[18]||(s[18]=t("label",{class:"label"},[p("الرقم الوطني (12 رقم) "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>l(a).national_id=o),type:"text",class:"input",maxlength:"12",inputmode:"numeric",pattern:"[0-9]{12}",placeholder:"مثال: 119900123456",required:""},null,512),[[_,l(a).national_id]])])]),t("div",ns,[t("div",os,[s[19]||(s[19]=t("label",{class:"label"},[p("رقم الهاتف "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>l(a).phone=o),type:"tel",class:"input",placeholder:"مثال: 0912345678",required:""},null,512),[[_,l(a).phone]])]),t("div",as,[s[21]||(s[21]=t("label",{class:"label"},[p("نوع الدفع "),t("span",{class:"required"},"*")],-1)),m(t("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>l(a).payment_type=o),class:"input select-input",required:""},[...s[20]||(s[20]=[t("option",{value:"",disabled:"",selected:""},"اختر نوع الدفع",-1),t("option",{value:0},"نقدي",-1),t("option",{value:1},"مصرف",-1)])],512),[[R,l(a).payment_type]])])]),t("div",es,[t("div",is,[s[22]||(s[22]=t("label",{class:"label"},[p("رقم الحساب "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>l(a).account_number=o),type:"text",class:"input",inputmode:"numeric",placeholder:"أدخل رقم الحساب الجاري",required:""},null,512),[[_,l(a).account_number]])]),t("div",rs,[s[23]||(s[23]=t("label",{class:"label"},[p("قيمة الحجز بالدولار "),t("span",{class:"required"},"*")],-1)),m(t("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>l(a).booking_amount=o),type:"number",step:"0.01",class:"input",placeholder:"مثال: 100",required:""},null,512),[[_,l(a).booking_amount]])])])]),s[48]||(s[48]=t("hr",{class:"divider"},null,-1)),t("div",ds,[s[45]||(s[45]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-file-invoice"}),t("span",null,"المستندات المطلوبة")],-1)),t("div",ps,[t("div",us,[s[29]||(s[29]=t("label",{class:"label"},[p("صورة جواز السفر "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).passport}])},[t("input",{type:"file",id:"passport_photo",class:"file-input",onChange:s[6]||(s[6]=o=>k(o,"passport")),accept:"image/*,.pdf",required:""},null,32),t("label",fs,[l(e).passport?w("passport")?(d(),r("div",ms,[...s[27]||(s[27]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:l(e).passport,class:"preview-img"},null,8,cs)):(d(),r(x,{key:0},[s[25]||(s[25]=t("i",{class:"fas fa-file-upload"},null,-1)),s[26]||(s[26]=t("span",null,"رفع الجواز (صورة أو PDF)",-1))],64))]),l(e).passport?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[7]||(s[7]=o=>q("passport"))},[...s[28]||(s[28]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),t("div",vs,[s[34]||(s[34]=t("label",{class:"label"},[p("صورة القسيمة "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).voucher}])},[t("input",{type:"file",id:"voucher_photo",class:"file-input",onChange:s[8]||(s[8]=o=>k(o,"voucher")),accept:"image/*,.pdf",required:""},null,32),t("label",bs,[l(e).voucher?w("voucher")?(d(),r("div",gs,[...s[32]||(s[32]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:l(e).voucher,class:"preview-img"},null,8,_s)):(d(),r(x,{key:0},[s[30]||(s[30]=t("i",{class:"fas fa-receipt"},null,-1)),s[31]||(s[31]=t("span",null,"رفع القسيمة (صورة أو PDF)",-1))],64))]),l(e).voucher?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[9]||(s[9]=o=>q("voucher"))},[...s[33]||(s[33]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),t("div",ys,[s[39]||(s[39]=t("label",{class:"label"},[p("صورة الرقم الوطني "),t("span",{class:"required"},"*")],-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).national_id}])},[t("input",{type:"file",id:"national_id_photo",class:"file-input",onChange:s[10]||(s[10]=o=>k(o,"national_id")),accept:"image/*,.pdf",required:""},null,32),t("label",ks,[l(e).national_id?w("national_id")?(d(),r("div",ws,[...s[37]||(s[37]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:l(e).national_id,class:"preview-img"},null,8,qs)):(d(),r(x,{key:0},[s[35]||(s[35]=t("i",{class:"fas fa-address-card"},null,-1)),s[36]||(s[36]=t("span",null,"رفع الرقم الوطني (صورة أو PDF)",-1))],64))]),l(e).national_id?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[11]||(s[11]=o=>q("national_id"))},[...s[38]||(s[38]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)]),t("div",xs,[s[44]||(s[44]=t("label",{class:"label"},"صورة إضافية (اختياري)",-1)),t("div",{class:y(["file-wrapper",{"has-file":l(e).additional}])},[t("input",{type:"file",id:"additional_photo",class:"file-input",onChange:s[12]||(s[12]=o=>k(o,"additional")),accept:"image/*,.pdf"},null,32),t("label",Cs,[l(e).additional?w("additional")?(d(),r("div",Fs,[...s[42]||(s[42]=[t("i",{class:"fas fa-file-pdf"},null,-1),t("span",null,"PDF جاهز",-1)])])):(d(),r("img",{key:2,src:l(e).additional,class:"preview-img"},null,8,Ds)):(d(),r(x,{key:0},[s[40]||(s[40]=t("i",{class:"fas fa-plus-circle"},null,-1)),s[41]||(s[41]=t("span",null,"رفع مستند إضافي",-1))],64))]),l(e).additional?(d(),r("button",{key:0,type:"button",class:"remove-btn",onClick:s[13]||(s[13]=o=>q("additional"))},[...s[43]||(s[43]=[t("i",{class:"fas fa-times"},null,-1)])])):g("",!0)],2)])]),s[46]||(s[46]=t("p",{class:"hint files-hint"},"الصيغ المسموحة: JPG, PNG, PDF - الحد الأقصى لكل ملف: 10MB",-1))]),s[49]||(s[49]=t("div",{class:"status-alert warning bottom-alert"},[t("i",{class:"fas fa-exclamation-triangle"}),t("span",null,"يرجى التأكد من ان التحويل المالي تم من نفس حساب صاحب البطاقه إلى حساب الشركة المذكور أعلاه")],-1)),t("div",hs,[t("button",{type:"submit",class:"submit-btn",disabled:l(v)},[t("span",null,B(l(v)?"جاري المعالجة...":"ارسال المرفقات"),1),t("i",{class:y(l(v)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,Ps)])],32)])]),l(h)?(d(),r("div",Bs,[t("div",Ss,[t("div",Vs,[s[52]||(s[52]=t("div",{class:"success-icon"},[t("i",{class:"fas fa-check-circle"})],-1)),s[53]||(s[53]=t("h2",null,"تم تقديم طلبك بنجاح!",-1)),s[54]||(s[54]=t("p",null,"رقم تتبع الحجز الخاص بك:",-1)),t("div",Ms,B(l(P)),1),s[55]||(s[55]=t("p",{class:"hint"},"احتفظ بهذا الرقم لتتبع حالة حجزك لاحقاً",-1)),t("div",Ns,[F(u,{to:"/",class:"submit-btn secondary"},{default:D(()=>[...s[50]||(s[50]=[t("i",{class:"fas fa-home"},null,-1),t("span",null,"الرئيسية",-1)])]),_:1}),F(u,{to:"/booking-cards/track",class:"submit-btn"},{default:D(()=>[...s[51]||(s[51]=[t("i",{class:"fas fa-search"},null,-1),t("span",null,"تتبع الطلب",-1)])]),_:1})])])])])):g("",!0)])}}}),Is=L(Us,[["__scopeId","data-v-e33692fb"]]);export{Is as default};
