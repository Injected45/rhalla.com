import{g as T,y as j,H as I,x as O,k as x,l as f,c as r,a as s,q as _,d,b as h,w as C,m as R,s as m,v as g,j as l,G as z,n as y,F,t as V,i as L,o as p,_ as W}from"./DgPf9jRU.js";import{_ as A}from"./DbX2zS6e.js";import{u as G}from"./BctxlEgA.js";const H={class:"booking-page"},J={class:"container"},K={class:"page-header"},Q={class:"bank-logo-wrapper"},X={class:"bank-logo-container"},Y=["src"],Z={class:"form-card"},ss={class:"form-section"},ts={class:"form-row"},ls={class:"form-group"},os={class:"form-group"},ns={class:"form-row"},es={class:"form-group"},as={class:"form-group"},is={class:"form-row"},rs={class:"form-group"},ps={class:"form-group"},ds={class:"form-section"},us={class:"file-grid"},fs={class:"form-group"},ms={for:"passport_photo",class:"file-label"},cs={key:1,class:"pdf-preview"},vs=["src"],bs={class:"form-group"},gs={for:"national_id_photo",class:"file-label"},_s={key:1,class:"pdf-preview"},ys=["src"],ks={class:"form-group"},ws={for:"voucher_photo",class:"file-label"},qs={key:1,class:"pdf-preview"},xs=["src"],hs={class:"submit-wrapper"},Cs=["disabled"],Fs={key:0,class:"modal-overlay show"},Ds={class:"modal"},Ss={class:"modal-body success-body"},Vs={class:"tracking-code-display"},Bs={class:"success-actions"},Ps=T({__name:"index",setup(Ms){j({title:"حجز بطاقة أغراض شخصية | شركة الرحالة",description:"خدمة حجز بطاقات الأغراض الشخصية للمواطنين عبر شركة الرحالة للصرافة"});const{isDark:B}=I(),{success:P,error:c}=G(),M=O().public.apiBase,n=x({name:"",phone:"",national_id:"",payment_type:"",account_number:"",booking_amount:""}),i=x({passport:null,voucher:null,national_id:null}),a=x({passport:"",voucher:"",national_id:""}),v=f(!1);f(""),f(!1);const N=f(["","","",""]);f([]),f(""),f(!1);const D=f(!1),S=f(""),k=(o,t)=>{const u=o.target.files?.[0];if(u&&(u.type.startsWith("image/")||u.type==="application/pdf")){if(u.size>10*1024*1024){c("حجم الملف يجب أن يكون أقل من 10MB");return}if(i[t]=u,u.type.startsWith("image/")){const e=new FileReader;e.onload=E=>{a[t]=E.target?.result},e.readAsDataURL(u)}else a[t]="pdf"}},w=o=>i[o]?.type==="application/pdf",q=o=>{i[o]=null,a[o]="";const t=document.getElementById(`${o}_photo`);t&&(t.value="")},U=async()=>{if(!i.passport||!i.voucher||!i.national_id){c("يرجى رفع المستندات الأساسية المطلوبة");return}if(Number(n.booking_amount)>2e3){c("قيمة الحجز لا يمكن أن تتجاوز 2000 دولار");return}v.value=!0;try{const o=new FormData;o.append("name",n.name),o.append("phone",n.phone),o.append("national_id",n.national_id),o.append("payment_type",n.payment_type.toString()),o.append("account_number",n.account_number),o.append("booking_amount",n.booking_amount),i.passport&&o.append("passport_photo",i.passport),i.voucher&&o.append("voucher_photo",i.voucher),i.national_id&&o.append("national_id_photo",i.national_id);const t=await $fetch(`${M}/booking-cards/store`,{method:"POST",body:o});t.success&&(S.value=t.tracking_code,D.value=!0,P("تم تقديم طلب حجز البطاقة بنجاح"),$())}catch(o){if(console.error("Step 1 failed:",o.data||o),o.data?.errors){const t=Object.values(o.data.errors).flat().join(`
`);c(t)}else c(o.data?.message||"حدث خطأ أثناء إرسال البيانات")}finally{v.value=!1}},$=()=>{n.name="",n.phone="",n.national_id="",n.payment_type="",n.account_number="",n.booking_amount="",i.passport=null,i.voucher=null,i.national_id=null,a.passport="",a.voucher="",a.national_id="",N.value=["","","",""],["passport_photo","voucher_photo","national_id_photo"].forEach(t=>{const b=document.getElementById(t);b&&(b.value="")})};return(o,t)=>{const b=L,u=A;return p(),r("div",H,[s("div",J,[s("div",K,[t[13]||(t[13]=s("div",{class:"header-badge"},[s("i",{class:"fas fa-id-card"}),s("span",null,"شركة الرحالة للصرافة والخدمات المالية")],-1)),t[14]||(t[14]=s("h1",{class:"page-title"},[d("منصة الرحالة "),s("span",{class:"gradient-text"},"للصرافة مخصصه لزبائن المصرف التجاري الوطني")],-1)),s("div",Q,[h(b,null,{default:C(()=>[s("div",X,[s("img",{src:l(B)?"/images/ncb-dark.png":"/images/ncb-light.png",alt:"National Commercial Bank",class:"bank-logo"},null,8,Y),t[12]||(t[12]=s("div",{class:"logo-shimmer"},null,-1))])]),_:1})])]),s("div",Z,[s("form",{onSubmit:R(U,["prevent"])},[t[40]||(t[40]=s("div",{class:"status-alert warning"},[s("i",{class:"fas fa-university"}),s("span",null,[d("يشترط سداد قيمة الحجز بالدينار الليبي بتحويل مصرفي صادر من حساب صاحب البطاقة حصراً إلى حساب شركة الرحالة للصرافة رقم: "),s("strong",null,"122012276814011")])],-1)),s("div",ss,[t[22]||(t[22]=s("h3",{class:"section-title"},[s("i",{class:"fas fa-user-edit"}),s("span",null,"المعلومات الشخصية")],-1)),s("div",ts,[s("div",ls,[t[15]||(t[15]=s("label",{class:"label"},[d("الإسم بالكامل "),s("span",{class:"required"},"*")],-1)),m(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l(n).name=e),type:"text",class:"input",placeholder:"أدخل اسمك كما هو في الجواز",required:""},null,512),[[g,l(n).name]])]),s("div",os,[t[16]||(t[16]=s("label",{class:"label"},[d("الرقم الوطني (12 رقم) "),s("span",{class:"required"},"*")],-1)),m(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l(n).national_id=e),type:"text",class:"input",maxlength:"12",inputmode:"numeric",pattern:"[0-9]{12}",placeholder:"مثال: 119900123456",required:""},null,512),[[g,l(n).national_id]])])]),s("div",ns,[s("div",es,[t[17]||(t[17]=s("label",{class:"label"},[d("رقم الهاتف "),s("span",{class:"required"},"*")],-1)),m(s("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l(n).phone=e),type:"tel",class:"input",placeholder:"مثال: 0912345678",required:""},null,512),[[g,l(n).phone]])]),s("div",as,[t[19]||(t[19]=s("label",{class:"label"},[d("نوع الدفع "),s("span",{class:"required"},"*")],-1)),m(s("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l(n).payment_type=e),class:"input select-input",required:""},[...t[18]||(t[18]=[s("option",{value:"",disabled:"",selected:""},"اختر نوع الدفع",-1),s("option",{value:0},"نقدي",-1),s("option",{value:1},"مصرف",-1)])],512),[[z,l(n).payment_type]])])]),s("div",is,[s("div",rs,[t[20]||(t[20]=s("label",{class:"label"},[d("رقم الحساب "),s("span",{class:"required"},"*")],-1)),m(s("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l(n).account_number=e),type:"text",class:"input",inputmode:"numeric",placeholder:"أدخل رقم الحساب الجاري",required:""},null,512),[[g,l(n).account_number]])]),s("div",ps,[t[21]||(t[21]=s("label",{class:"label"},[d("قيمة الحجز بالدولار "),s("span",{class:"required"},"*")],-1)),m(s("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l(n).booking_amount=e),type:"number",step:"0.01",class:"input",placeholder:"مثال: 100",required:""},null,512),[[g,l(n).booking_amount]])])])]),t[41]||(t[41]=s("hr",{class:"divider"},null,-1)),s("div",ds,[t[38]||(t[38]=s("h3",{class:"section-title"},[s("i",{class:"fas fa-file-invoice"}),s("span",null,"المستندات المطلوبة")],-1)),t[39]||(t[39]=s("div",{class:"status-alert warning",style:{"margin-bottom":"25px"}},[s("i",{class:"fas fa-info-circle"}),s("span",null,"يرجى ملء البيانات بدقة ورفع المستندات المطلوبة (صور أو PDF بحد أقصى 10 ميجا)")],-1)),s("div",us,[s("div",fs,[t[27]||(t[27]=s("label",{class:"label"},[d("صورة جواز السفر "),s("span",{class:"required"},"*")],-1)),s("div",{class:y(["file-wrapper",{"has-file":l(a).passport}])},[s("input",{type:"file",id:"passport_photo",class:"file-input",onChange:t[6]||(t[6]=e=>k(e,"passport")),accept:"image/*,.pdf",required:""},null,32),s("label",ms,[l(a).passport?w("passport")?(p(),r("div",cs,[...t[25]||(t[25]=[s("i",{class:"fas fa-file-pdf"},null,-1),s("span",null,"PDF جاهز",-1)])])):(p(),r("img",{key:2,src:l(a).passport,class:"preview-img"},null,8,vs)):(p(),r(F,{key:0},[t[23]||(t[23]=s("i",{class:"fas fa-file-upload"},null,-1)),t[24]||(t[24]=s("span",null,"رفع الجواز (صورة أو PDF)",-1))],64))]),l(a).passport?(p(),r("button",{key:0,type:"button",class:"remove-btn",onClick:t[7]||(t[7]=e=>q("passport"))},[...t[26]||(t[26]=[s("i",{class:"fas fa-times"},null,-1)])])):_("",!0)],2)]),s("div",bs,[t[32]||(t[32]=s("label",{class:"label"},[d("صورة شهادة الرقم الوطني "),s("span",{class:"required"},"*")],-1)),s("div",{class:y(["file-wrapper",{"has-file":l(a).national_id}])},[s("input",{type:"file",id:"national_id_photo",class:"file-input",onChange:t[8]||(t[8]=e=>k(e,"national_id")),accept:"image/*,.pdf",required:""},null,32),s("label",gs,[l(a).national_id?w("national_id")?(p(),r("div",_s,[...t[30]||(t[30]=[s("i",{class:"fas fa-file-pdf"},null,-1),s("span",null,"PDF جاهز",-1)])])):(p(),r("img",{key:2,src:l(a).national_id,class:"preview-img"},null,8,ys)):(p(),r(F,{key:0},[t[28]||(t[28]=s("i",{class:"fas fa-address-card"},null,-1)),t[29]||(t[29]=s("span",null,"رفع شهادة الرقم الوطني (صورة أو PDF)",-1))],64))]),l(a).national_id?(p(),r("button",{key:0,type:"button",class:"remove-btn",onClick:t[9]||(t[9]=e=>q("national_id"))},[...t[31]||(t[31]=[s("i",{class:"fas fa-times"},null,-1)])])):_("",!0)],2)]),s("div",ks,[t[37]||(t[37]=s("label",{class:"label"},[d("صورة قسيمة التحويل "),s("span",{class:"required"},"*")],-1)),s("div",{class:y(["file-wrapper",{"has-file":l(a).voucher}])},[s("input",{type:"file",id:"voucher_photo",class:"file-input",onChange:t[10]||(t[10]=e=>k(e,"voucher")),accept:"image/*,.pdf",required:""},null,32),s("label",ws,[l(a).voucher?w("voucher")?(p(),r("div",qs,[...t[35]||(t[35]=[s("i",{class:"fas fa-file-pdf"},null,-1),s("span",null,"PDF جاهز",-1)])])):(p(),r("img",{key:2,src:l(a).voucher,class:"preview-img"},null,8,xs)):(p(),r(F,{key:0},[t[33]||(t[33]=s("i",{class:"fas fa-receipt"},null,-1)),t[34]||(t[34]=s("span",null,"رفع قسيمة التحويل (صورة أو PDF)",-1))],64))]),l(a).voucher?(p(),r("button",{key:0,type:"button",class:"remove-btn",onClick:t[11]||(t[11]=e=>q("voucher"))},[...t[36]||(t[36]=[s("i",{class:"fas fa-times"},null,-1)])])):_("",!0)],2)])])]),t[42]||(t[42]=s("div",{class:"status-alert warning bottom-alert"},[s("i",{class:"fas fa-exclamation-triangle"}),s("span",null,"يرجى التأكد من ان التحويل المالي تم من نفس حساب صاحب البطاقه إلى حساب الشركة المذكور أعلاه")],-1)),s("div",hs,[s("button",{type:"submit",class:"submit-btn",disabled:l(v)},[s("span",null,V(l(v)?"جاري المعالجة...":"ارسال المرفقات"),1),s("i",{class:y(l(v)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,Cs)])],32)])]),l(D)?(p(),r("div",Fs,[s("div",Ds,[s("div",Ss,[t[45]||(t[45]=s("div",{class:"success-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),t[46]||(t[46]=s("h2",null,"تم تقديم طلبك بنجاح!",-1)),t[47]||(t[47]=s("p",null,"رقم تتبع الحجز الخاص بك:",-1)),s("div",Vs,V(l(S)),1),t[48]||(t[48]=s("p",{class:"hint"},"احتفظ بهذا الرقم لتتبع حالة حجزك لاحقاً",-1)),s("div",Bs,[h(u,{to:"/",class:"submit-btn secondary"},{default:C(()=>[...t[43]||(t[43]=[s("i",{class:"fas fa-home"},null,-1),s("span",null,"الرئيسية",-1)])]),_:1}),h(u,{to:"/booking-cards/track",class:"submit-btn"},{default:C(()=>[...t[44]||(t[44]=[s("i",{class:"fas fa-search"},null,-1),s("span",null,"تتبع الطلب",-1)])]),_:1})])])])])):_("",!0)])}}}),Ts=W(Ps,[["__scopeId","data-v-53f4f786"]]);export{Ts as default};
