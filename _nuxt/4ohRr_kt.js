import{I as a}from"./BDj9wMSF.js";const n=a("currency",{state:()=>({internalCurrencies:[],externalCurrencies:[],internalLastUpdated:"",externalLastUpdated:"",loading:!1,error:null,hasFetched:!1}),actions:{async fetchCurrencies(t=!1){if(!(this.hasFetched&&!t)){this.loading=!0,this.error=null;try{const[e,r]=await Promise.all([$fetch("/api/currency-prices/internal"),$fetch("/api/currency-prices/external")]);e.success&&(this.internalCurrencies=e.data,this.internalLastUpdated=e.last_updated),r.success&&(this.externalCurrencies=r.data,this.externalLastUpdated=r.last_updated),this.hasFetched=!0}catch(e){this.error="فشل في تحميل أسعار العملات",console.error("Currency fetch error:",e)}finally{this.loading=!1}}},async refreshCurrencies(){await this.fetchCurrencies(!0)}}});export{n as u};
