import{_ as g}from"./B0-1EhWU.js";import{g as b,y as k,x as y,l as e,c as l,a as s,e as x,q as h,j as n,d as C,s as N,v as V,z as w,t as i,n as f,b as B,w as S,F as T,r as $,o,_ as q}from"./BL0a6ohr.js";const L={class:"track-page"},z={class:"container"},D={key:0,class:"track-card"},F={class:"form-group"},M={class:"input-wrapper"},O=["disabled"],R={key:1,class:"results-container"},j={class:"results-header"},E={key:0,class:"no-results"},I={key:1,class:"bookings-grid"},P={class:"card-main"},U={class:"card-info"},A={class:"info-value"},G={class:"card-info"},H={class:"info-value"},J={class:"card-info"},K={class:"info-value tracking-code"},Q={class:"card-info"},W={class:"info-value"},X=b({__name:"track",setup(Y){k({title:"تتبع حجز البطاقة | شركة الرحالة",description:"تتبع حالة حجز بطاقة الأغراض الشخصية الخاصة بك"});const v=y().public.apiBase,p=e(1),d=e(""),r=e(!1);e(""),e(["","","",""]),e([]),e("");const u=e([]),_=async()=>{if(d.value){r.value=!0;try{const c=await $fetch(`${v}/booking-cards/track`,{method:"POST",body:{phone:d.value}});c.success&&(u.value=c.bookings,p.value=3)}catch(c){alert(c.data?.message||"لم يتم العثور على حجوزات لهذا الرقم.")}finally{r.value=!1}}};return(c,a)=>{const m=g;return o(),l("div",L,[s("div",z,[a[14]||(a[14]=x('<div class="page-header" data-v-7c768da8><div class="header-badge" data-v-7c768da8><i class="fas fa-search" data-v-7c768da8></i><span data-v-7c768da8>تتبع الحجز</span></div><h1 class="page-title" data-v-7c768da8>تتبع حالة <span class="gradient-text" data-v-7c768da8>حجز البطاقة</span></h1><p class="page-subtitle" data-v-7c768da8>أدخل رقم هاتفك المسجل لتصلك رسالة تحقق وتعرض حالة حجزك</p></div>',1)),n(p)===1?(o(),l("div",D,[s("div",F,[a[3]||(a[3]=s("label",{class:"label"},[C("رقم الهاتف المسجل "),s("span",{class:"required"},"*")],-1)),s("div",M,[a[2]||(a[2]=s("i",{class:"fas fa-phone-flip"},null,-1)),N(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>w(d)?d.value=t:null),type:"tel",class:"input",placeholder:"مثال: 0912345678 أو 01012345678",required:""},null,512),[[V,n(d)]])]),a[4]||(a[4]=s("span",{class:"hint"},"يدعم الأرقام الليبية والمصرية - سيتم إرسال الرمز عبر الواتساب",-1))]),s("button",{class:"submit-btn",disabled:n(r),onClick:_},[s("span",null,i(n(r)?"جاري الإرسال...":"إرسال رمز التحقق"),1),s("i",{class:f(n(r)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,O)])):n(p)===3?(o(),l("div",R,[s("div",j,[a[6]||(a[6]=s("h3",null,"الحجوزات المرتبطة برقم الهاتف",-1)),s("button",{class:"track-again-btn",onClick:a[1]||(a[1]=t=>p.value=1)},[...a[5]||(a[5]=[s("i",{class:"fas fa-rotate-left"},null,-1),s("span",null,"بحث آخر",-1)])])]),n(u).length===0?(o(),l("div",E,[a[8]||(a[8]=s("i",{class:"fas fa-folder-open"},null,-1)),a[9]||(a[9]=s("p",null,"لم يتم العثور على أي حجوزات مؤكدة لهذا الرقم",-1)),B(m,{to:"/booking-cards",class:"submit-btn"},{default:S(()=>[...a[7]||(a[7]=[s("span",null,"احجز الآن",-1)])]),_:1})])):(o(),l("div",I,[(o(!0),l(T,null,$(n(u),t=>(o(),l("div",{key:t.tracking_code,class:"booking-card"},[s("div",{class:f(["card-status",`status-${t.status_val}`])},i(t.status),3),s("div",P,[s("div",U,[a[10]||(a[10]=s("span",{class:"info-label"},"اسم صاحب الطلب",-1)),s("span",A,i(t.name),1)]),s("div",G,[a[11]||(a[11]=s("span",{class:"info-label"},"نوع الدفع",-1)),s("span",H,i(t.payment_type),1)]),s("div",J,[a[12]||(a[12]=s("span",{class:"info-label"},"رقم التتبع",-1)),s("span",K,i(t.tracking_code),1)]),s("div",Q,[a[13]||(a[13]=s("span",{class:"info-label"},"تاريخ الطلب",-1)),s("span",W,i(t.date),1)])])]))),128))]))])):h("",!0)])])}}}),ts=q(X,[["__scopeId","data-v-7c768da8"]]);export{ts as default};
