import{h as P,E as T,y as R,z as G,i,k as j,D as $,c as u,a as s,l as b,f as J,A as Z,B as r,d as a,C as c,m as t,I,F,r as N,t as y,n as h,b as H,w as Q,e as W,o as d,K as X,_ as Y}from"./DxifY-y2.js";const ss={class:"wu-page"},es={class:"container"},ts={class:"wu-form-card"},ls={class:"wu-form-row"},os={class:"wu-form-group"},ns={class:"wu-form-group"},as={class:"wu-form-row"},is={class:"wu-form-group"},us={class:"wu-form-group"},rs={class:"wu-form-row"},ds={class:"wu-form-group"},ps={class:"wu-form-group"},cs={class:"wu-file-wrapper"},ms={key:0,class:"wu-preview-container show"},vs=["src"],ws={class:"wu-form-row"},fs={class:"wu-form-group"},bs={class:"wu-form-group"},ys={class:"wu-form-row"},gs={class:"wu-form-group"},_s={key:0,class:"wu-shimmer-select"},ks=["value"],xs={class:"wu-form-group"},qs={class:"wu-form-row"},Vs={class:"wu-form-group"},Cs={class:"wu-amount-wrapper"},Us={class:"wu-submit-wrapper"},Bs=["disabled"],Ms={key:0,class:"wu-modal-overlay show"},Ss={class:"wu-modal"},$s={class:"wu-modal-body"},Is={class:"wu-otp-wrapper"},Fs=["onUpdate:modelValue","onInput","onKeydown"],Ns={key:0,class:"wu-modal-error",style:{display:"block"}},hs=["disabled"],zs={key:1,class:"wu-modal-overlay show"},Es={class:"wu-modal"},Os={class:"wu-modal-body",style:{padding:"50px 30px","text-align":"center"}},As={key:2,class:"wu-modal-overlay show"},Ds={class:"wu-modal"},Ks={class:"wu-modal-body",style:{"padding-top":"50px"}},Ls={class:"wu-tracking-code"},Ps=P({__name:"transfer",setup(Ts){T({title:"طلب تحويل ويسترن يونيون | الرحالة للصرافة",description:"قم بإرسال الأموال عبر ويسترن يونيون من ليبيا إلى أي مكان في العالم"});const{error:C}=R(),o=G({sender_name:"",sender_country:"",sender_city:"",national_id:"",sender_phone:"",receiver_name_ar:"",receiver_name_en:"",receiver_country:"",receiver_phone:"",amount:""}),_=i(null),g=i(""),U=i([]),k=i(!0),x=i(!1),z=i(""),B=i(!1),v=i(["","","",""]),q=i([]),w=i(""),f=i(!1),M=i(!1),S=i("");j(async()=>{k.value=!0;try{const n=$(),e=await $fetch(`${n.public.apiBase}/western-union/countries`);U.value=e.countries}catch(n){console.error("Failed to load countries",n)}finally{k.value=!1}});const E=n=>{const p=n.target.files?.[0];if(p){if(p.size>5*1024*1024){C("حجم الصورة يجب أن يكون أقل من 5MB");return}_.value=p;const l=new FileReader;l.onload=m=>{g.value=m.target?.result},l.readAsDataURL(p)}},O=()=>{_.value=null,g.value="";const n=document.getElementById("passport_image");n&&(n.value="")},V=i(!1),A=async()=>{if(!_.value){C("يرجى رفع صورة الجواز");return}V.value=!0},D=n=>{v.value[n]&&n<3&&q.value[n+1]?.focus()},K=(n,e)=>{!v.value[n]&&n>0&&q.value[n-1]?.focus()},L=async()=>{const n=v.value.join("");if(n.length!==4){w.value="يرجى إدخال الرمز كاملاً";return}f.value=!0,w.value="";try{const e=$(),p=await $fetch(`${e.public.apiBase}/western-union/verify-otp`,{method:"POST",body:{token:z.value,otp:n}});p.success&&(B.value=!1,S.value=p.tracking_code,M.value=!0)}catch(e){w.value=e.data?.message||"رمز التحقق غير صحيح"}finally{f.value=!1}};return(n,e)=>{const p=W;return d(),u("div",ss,[s("div",es,[e[34]||(e[34]=J('<div class="wu-header" data-v-4bc473b5><div class="wu-badge" data-v-4bc473b5><i class="fas fa-money-bill-transfer" data-v-4bc473b5></i><span data-v-4bc473b5>ويسترن يونيون</span></div><h1 class="wu-title" data-v-4bc473b5>طلب تحويل <span class="gradient-text" data-v-4bc473b5>ويسترن يونيون</span></h1><p class="wu-subtitle" data-v-4bc473b5>يرجى ملء جميع البيانات بشكل صحيح لإتمام عملية التحويل</p></div>',1)),s("div",ts,[s("form",{onSubmit:Z(A,["prevent"])},[e[31]||(e[31]=s("h3",{class:"wu-section-title"},[s("i",{class:"fas fa-user"}),s("span",null,"معلومات الراسل")],-1)),s("div",ls,[s("div",os,[e[11]||(e[11]=s("label",{class:"wu-label"},[a("اسم الراسل "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).sender_name=l),type:"text",class:"wu-input",required:""},null,512),[[c,t(o).sender_name]])]),s("div",ns,[e[13]||(e[13]=s("label",{class:"wu-label"},[a("بلد الراسل "),s("span",{class:"required"},"*")],-1)),r(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).sender_country=l),class:"wu-select",required:""},[...e[12]||(e[12]=[s("option",{value:""},"اختر البلد",-1),s("option",{value:"ليبيا"},"ليبيا",-1)])],512),[[I,t(o).sender_country]])])]),s("div",as,[s("div",is,[e[14]||(e[14]=s("label",{class:"wu-label"},[a("المدينة "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).sender_city=l),type:"text",class:"wu-input",required:""},null,512),[[c,t(o).sender_city]])]),s("div",us,[e[15]||(e[15]=s("label",{class:"wu-label"},[a("الرقم الوطني (12 رقم) "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).national_id=l),type:"text",class:"wu-input",maxlength:"12",pattern:"[0-9]{12}",required:""},null,512),[[c,t(o).national_id]])])]),s("div",rs,[s("div",ds,[e[16]||(e[16]=s("label",{class:"wu-label"},[a("رقم هاتف الراسل "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).sender_phone=l),type:"tel",class:"wu-input",placeholder:"مثال: 0912345678",required:""},null,512),[[c,t(o).sender_phone]]),e[17]||(e[17]=s("span",{class:"wu-hint"},"أرقام ليبيا أو مصر فقط - سيتم إرسال رمز التحقق عبر الواتساب",-1))]),s("div",ps,[e[20]||(e[20]=s("label",{class:"wu-label"},[a("صورة الجواز "),s("span",{class:"required"},"*")],-1)),s("div",cs,[s("input",{type:"file",class:"wu-file-input",id:"passport_image",onChange:E,accept:"image/*",required:""},null,32),e[18]||(e[18]=s("label",{for:"passport_image",class:"wu-file-label"},[s("i",{class:"fas fa-cloud-upload-alt"}),s("span",{class:"wu-file-text"},"اضغط لرفع صورة الجواز")],-1))]),e[21]||(e[21]=s("span",{class:"wu-hint"},"الصيغ المسموحة: JPG, PNG - الحد الأقصى: 5MB",-1)),t(g)?(d(),u("div",ms,[s("img",{src:t(g),class:"wu-preview-img",alt:"معاينة"},null,8,vs),s("button",{type:"button",class:"wu-preview-remove",onClick:O},[...e[19]||(e[19]=[s("i",{class:"fas fa-times"},null,-1)])])])):b("",!0)])]),e[32]||(e[32]=s("hr",{class:"wu-divider"},null,-1)),e[33]||(e[33]=s("h3",{class:"wu-section-title",style:{color:"#00B17A"}},[s("i",{class:"fas fa-user-check"}),s("span",null,"معلومات المستلم")],-1)),s("div",ws,[s("div",fs,[e[22]||(e[22]=s("label",{class:"wu-label"},[a("اسم المستلم بالكامل (بالعربي) "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).receiver_name_ar=l),type:"text",class:"wu-input",required:""},null,512),[[c,t(o).receiver_name_ar]])]),s("div",bs,[e[23]||(e[23]=s("label",{class:"wu-label"},[a("اسم المستلم بالكامل (بالإنجليزي) "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).receiver_name_en=l),type:"text",class:"wu-input",pattern:"[a-zA-Z\\s]+",required:""},null,512),[[c,t(o).receiver_name_en]]),e[24]||(e[24]=s("span",{class:"wu-hint"},"حروف إنجليزية فقط",-1))])]),s("div",ys,[s("div",gs,[e[27]||(e[27]=s("label",{class:"wu-label"},[a("بلد المستلم "),s("span",{class:"required"},"*")],-1)),t(k)?(d(),u("div",_s,[...e[25]||(e[25]=[s("div",{class:"shimmer-animation"},null,-1)])])):r((d(),u("select",{key:1,"onUpdate:modelValue":e[7]||(e[7]=l=>t(o).receiver_country=l),class:"wu-select",required:""},[e[26]||(e[26]=s("option",{value:""},"اختر البلد",-1)),(d(!0),u(F,null,N(t(U),l=>(d(),u("option",{key:l,value:l},y(l),9,ks))),128))],512)),[[I,t(o).receiver_country]])]),s("div",xs,[e[28]||(e[28]=s("label",{class:"wu-label"},[a("رقم هاتف المستلم "),s("span",{class:"required"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>t(o).receiver_phone=l),type:"tel",class:"wu-input",required:""},null,512),[[c,t(o).receiver_phone]])])]),s("div",qs,[s("div",Vs,[e[30]||(e[30]=s("label",{class:"wu-label"},[a("المبلغ بالدولار ($) "),s("span",{class:"required"},"*")],-1)),s("div",Cs,[e[29]||(e[29]=s("span",{class:"wu-amount-prefix"},"$",-1)),r(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t(o).amount=l),type:"number",class:"wu-input wu-amount-input",min:"1",step:"0.01",required:""},null,512),[[c,t(o).amount]])])])]),s("div",Us,[s("button",{type:"submit",class:"wu-submit-btn",disabled:t(x)},[s("span",null,y(t(x)?"جاري الإرسال...":"التالي"),1),s("i",{class:h(t(x)?"fas fa-spinner fa-spin":"fas fa-arrow-left")},null,2)],8,Bs)])],32)])]),t(B)?(d(),u("div",Ms,[s("div",Ss,[e[36]||(e[36]=s("div",{class:"wu-modal-header"},[s("i",{class:"fas fa-shield-halved"}),s("h3",null,"التحقق من رقم الهاتف")],-1)),s("div",$s,[e[35]||(e[35]=s("p",null,[a("تم إرسال رمز التحقق إلى رقم هاتفك عبر الواتساب"),s("br"),a("أدخل الرمز المكون من 4 أرقام")],-1)),s("div",Is,[(d(),u(F,null,N(4,l=>r(s("input",{key:l,ref_for:!0,ref:m=>t(q)[l-1]=m,"onUpdate:modelValue":m=>t(v)[l-1]=m,type:"text",class:"wu-otp-input",maxlength:"1",onInput:m=>D(l-1),onKeydown:X(m=>K(l-1),["backspace"])},null,40,Fs),[[c,t(v)[l-1]]])),64))]),t(w)?(d(),u("div",Ns,y(t(w)),1)):b("",!0),s("button",{type:"button",class:"wu-submit-btn",onClick:L,disabled:t(f)},[s("i",{class:h(t(f)?"fas fa-spinner fa-spin":"fas fa-check")},null,2),s("span",null,y(t(f)?"جاري التحقق...":"تأكيد"),1)],8,hs)])])])):b("",!0),t(V)?(d(),u("div",zs,[s("div",Es,[s("div",Os,[e[38]||(e[38]=s("div",{class:"wu-success-icon",style:{color:"#ffc107"}},[s("i",{class:"fas fa-clock"})],-1)),e[39]||(e[39]=s("h2",{style:{"margin-bottom":"15px",color:"var(--text-primary)"}},"الخدمة قيد التطوير",-1)),e[40]||(e[40]=s("p",{style:{color:"var(--text-secondary)","font-size":"1.1rem","margin-bottom":"25px"}},[a(" خدمة ويسترن يونيون ستكون متاحة قريباً!"),s("br"),a(" شكراً لصبركم. ")],-1)),s("button",{type:"button",class:"wu-submit-btn",onClick:e[10]||(e[10]=l=>V.value=!1),style:{background:"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)"}},[...e[37]||(e[37]=[s("i",{class:"fas fa-arrow-right"},null,-1),s("span",null,"رجوع",-1)])])])])])):b("",!0),t(M)?(d(),u("div",As,[s("div",Ds,[s("div",Ks,[e[42]||(e[42]=s("div",{class:"wu-success-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),e[43]||(e[43]=s("h2",{style:{"margin-bottom":"10px"}},"تم تقديم طلبك بنجاح!",-1)),e[44]||(e[44]=s("p",null,"رقم التتبع الخاص بك:",-1)),s("div",Ls,y(t(S)),1),e[45]||(e[45]=s("p",{style:{"font-size":"0.9rem"}},"احتفظ بهذا الرقم لتتبع طلبك",-1)),H(p,{to:"/",class:"wu-submit-btn",style:{"margin-top":"20px","text-decoration":"none"}},{default:Q(()=>[...e[41]||(e[41]=[s("i",{class:"fas fa-home"},null,-1),s("span",null,"العودة للرئيسية",-1)])]),_:1})])])])):b("",!0)])}}}),Gs=Y(Ps,[["__scopeId","data-v-4bc473b5"]]);export{Gs as default};
