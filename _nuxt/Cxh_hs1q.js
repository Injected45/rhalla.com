import{J as a,D as n}from"./C3X68_BC.js";const c=a("currency",{state:()=>({internalCurrencies:[],externalCurrencies:[],internalLastUpdated:"",externalLastUpdated:"",loading:!1,error:null,hasFetched:!1}),actions:{async fetchCurrencies(s=!1){if(this.hasFetched&&!s)return;this.loading=!0,this.error=null;const t=n();try{const[e,r]=await Promise.all([$fetch(`${t.public.apiBase}/currency-prices/internal`),$fetch(`${t.public.apiBase}/currency-prices/external`)]);e.success&&(this.internalCurrencies=e.data,this.internalLastUpdated=e.last_updated),r.success&&(this.externalCurrencies=r.data,this.externalLastUpdated=r.last_updated),this.hasFetched=!0}catch(e){this.error="فشل في تحميل أسعار العملات",console.error("Currency fetch error:",e)}finally{this.loading=!1}},async refreshCurrencies(){await this.fetchCurrencies(!0)}}});export{c as u};
