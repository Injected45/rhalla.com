import{_ as y}from"./BcDViexZ.js";import{g as h,y as x,x as X,l as o,B as C,c as t,a as s,e as w,j as n,F as _,q as b,d as B,s as N,v as V,z as $,t as d,n as m,b as S,w as T,r as q,o as l,_ as L}from"./a-Cwvg04.js";const M={class:"track-page"},z={class:"container"},D={key:0,class:"disabled-message"},E={key:0,class:"track-card"},F={class:"form-group"},O={class:"input-wrapper"},R=["disabled"],j={key:1,class:"results-container"},I={class:"results-header"},P={key:0,class:"no-results"},U={key:1,class:"bookings-grid"},A={class:"card-main"},G={class:"card-info"},H={class:"info-value"},J={class:"card-info"},K={class:"info-value"},Q={class:"card-info"},W={class:"info-value tracking-code"},Y={class:"card-info"},Z={class:"info-value"},ss={key:0,class:"status-alert"},as=h({__name:"track",setup(es){x({title:"تتبع حجز البطاقة | شركة الرحالة",description:"تتبع حالة حجز بطاقة الأغراض الشخصية الخاصة بك"});const v=X().public.apiBase,f=o(!0);C(async()=>{try{const i=await $fetch(`${v}/booking-cards/status`);f.value=i.enabled}catch{f.value=!0}});const u=o(1),r=o(""),c=o(!1);o(""),o(["","","",""]),o([]),o("");const p=o([]),k=async()=>{if(r.value){c.value=!0;try{const i=await $fetch(`${v}/booking-cards/track`,{method:"POST",body:{phone:r.value}});i.success&&(p.value=i.bookings,u.value=3)}catch(i){alert(i.data?.message||"لم يتم العثور على حجوزات لهذا الرقم.")}finally{c.value=!1}}};return(i,a)=>{const g=y;return l(),t("div",M,[s("div",z,[a[15]||(a[15]=w('<div class="page-header" data-v-52e637ee><div class="header-badge" data-v-52e637ee><i class="fas fa-search" data-v-52e637ee></i><span data-v-52e637ee>تتبع الطلب</span></div><h1 class="page-title" data-v-52e637ee>تتبع حالة <span class="gradient-text" data-v-52e637ee>المستندات</span></h1><p class="page-subtitle" data-v-52e637ee>أدخل رقم هاتفك المسجل لعرض حالة طلبك ومستنداتك</p></div>',1)),n(f)?(l(),t(_,{key:1},[n(u)===1?(l(),t("div",E,[s("div",F,[a[4]||(a[4]=s("label",{class:"label"},[B("رقم الهاتف المسجل "),s("span",{class:"required"},"*")],-1)),s("div",O,[a[3]||(a[3]=s("i",{class:"fas fa-phone-flip"},null,-1)),N(s("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>$(r)?r.value=e:null),type:"tel",class:"input",placeholder:"09XXXXXXXXXX : مثال",required:""},null,512),[[V,n(r)]])])]),s("button",{class:"submit-btn",disabled:n(c),onClick:k},[s("span",null,d(n(c)?"جاري التحميل...":"موافق"),1),s("i",{class:m(n(c)?"fas fa-spinner fa-spin":"fas fa-check-circle")},null,2)],8,R)])):n(u)===3?(l(),t("div",j,[s("div",I,[a[6]||(a[6]=s("h3",null,"الحجوزات المرتبطة برقم الهاتف",-1)),s("button",{class:"track-again-btn",onClick:a[1]||(a[1]=e=>u.value=1)},[...a[5]||(a[5]=[s("i",{class:"fas fa-rotate-left"},null,-1),s("span",null,"بحث آخر",-1)])])]),n(p).length===0?(l(),t("div",P,[a[8]||(a[8]=s("i",{class:"fas fa-folder-open"},null,-1)),a[9]||(a[9]=s("p",null,"لم يتم العثور على أي حجوزات مؤكدة لهذا الرقم",-1)),S(g,{to:"/booking-cards",class:"submit-btn"},{default:T(()=>[...a[7]||(a[7]=[s("span",null,"احجز الآن",-1)])]),_:1})])):(l(),t("div",U,[(l(!0),t(_,null,q(n(p),e=>(l(),t("div",{key:e.tracking_code,class:"booking-card"},[s("div",{class:m(["card-status",`status-${e.status_val}`])},d(e.status),3),s("div",A,[s("div",G,[a[10]||(a[10]=s("span",{class:"info-label"},"اسم صاحب الطلب",-1)),s("span",H,d(e.name),1)]),s("div",J,[a[11]||(a[11]=s("span",{class:"info-label"},"نوع الدفع",-1)),s("span",K,d(e.payment_type),1)]),s("div",Q,[a[12]||(a[12]=s("span",{class:"info-label"},"رقم التتبع",-1)),s("span",W,d(e.tracking_code),1)]),s("div",Y,[a[13]||(a[13]=s("span",{class:"info-label"},"تاريخ الطلب",-1)),s("span",Z,d(e.date),1)])])]))),128)),n(p).some(e=>e.status_val===0)?(l(),t("div",ss,[...a[14]||(a[14]=[s("i",{class:"fas fa-exclamation-triangle"},null,-1),s("span",null,"ستصلك رساله قريبة بنتيجة المعامله",-1)])])):b("",!0)]))])):b("",!0)],64)):(l(),t("div",D,[...a[2]||(a[2]=[s("div",{class:"disabled-card"},[s("i",{class:"fas fa-ban disabled-icon"}),s("h2",null,"عذراً الحجز غير متاح الآن"),s("p",null,"نعتذر عن عدم توفر خدمة تتبع الطلبات حالياً، يرجى المحاولة لاحقاً")],-1)])]))])])}}}),os=L(as,[["__scopeId","data-v-52e637ee"]]);export{os as default};
