import{_ as g}from"./CcDT8H_6.js";import{g as k,y,x,l as n,c as l,a as s,e as h,q as f,j as e,d as C,s as N,v as V,z as w,t as i,n as v,b as B,w as S,F as T,r as $,o,_ as q}from"./c-da_mGK.js";const L={class:"track-page"},z={class:"container"},D={key:0,class:"track-card"},F={class:"form-group"},M={class:"input-wrapper"},O=["disabled"],R={key:1,class:"results-container"},j={class:"results-header"},E={key:0,class:"no-results"},I={key:1,class:"bookings-grid"},P={class:"card-main"},U={class:"card-info"},A={class:"info-value"},G={class:"card-info"},H={class:"info-value"},J={class:"card-info"},K={class:"info-value tracking-code"},Q={class:"card-info"},W={class:"info-value"},X={key:0,class:"status-alert"},Y=k({__name:"track",setup(Z){y({title:"تتبع حجز البطاقة | شركة الرحالة",description:"تتبع حالة حجز بطاقة الأغراض الشخصية الخاصة بك"});const b=x().public.apiBase,p=n(1),d=n(""),r=n(!1);n(""),n(["","","",""]),n([]),n("");const u=n([]),_=async()=>{if(d.value){r.value=!0;try{const c=await $fetch(`${b}/booking-cards/track`,{method:"POST",body:{phone:d.value}});c.success&&(u.value=c.bookings,p.value=3)}catch(c){alert(c.data?.message||"لم يتم العثور على حجوزات لهذا الرقم.")}finally{r.value=!1}}};return(c,a)=>{const m=g;return o(),l("div",L,[s("div",z,[a[15]||(a[15]=h('<div class="page-header" data-v-b6be01da><div class="header-badge" data-v-b6be01da><i class="fas fa-search" data-v-b6be01da></i><span data-v-b6be01da>تتبع الحجز</span></div><h1 class="page-title" data-v-b6be01da>تتبع حالة <span class="gradient-text" data-v-b6be01da>حجز البطاقة</span></h1><p class="page-subtitle" data-v-b6be01da>أدخل رقم هاتفك المسجل لتصلك رسالة تحقق وتعرض حالة حجزك</p></div>',1)),e(p)===1?(o(),l("div",D,[s("div",F,[a[3]||(a[3]=s("label",{class:"label"},[C("رقم الهاتف المسجل "),s("span",{class:"required"},"*")],-1)),s("div",M,[a[2]||(a[2]=s("i",{class:"fas fa-phone-flip"},null,-1)),N(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>w(d)?d.value=t:null),type:"tel",class:"input",placeholder:"مثال: 0912345678 أو 01012345678",required:""},null,512),[[V,e(d)]])]),a[4]||(a[4]=s("span",{class:"hint"},"يدعم الأرقام الليبية والمصرية - سيتم إرسال الرمز عبر الواتساب",-1))]),s("button",{class:"submit-btn",disabled:e(r),onClick:_},[s("span",null,i(e(r)?"جاري الإرسال...":"إرسال رمز التحقق"),1),s("i",{class:v(e(r)?"fas fa-spinner fa-spin":"fas fa-paper-plane")},null,2)],8,O)])):e(p)===3?(o(),l("div",R,[s("div",j,[a[6]||(a[6]=s("h3",null,"الحجوزات المرتبطة برقم الهاتف",-1)),s("button",{class:"track-again-btn",onClick:a[1]||(a[1]=t=>p.value=1)},[...a[5]||(a[5]=[s("i",{class:"fas fa-rotate-left"},null,-1),s("span",null,"بحث آخر",-1)])])]),e(u).length===0?(o(),l("div",E,[a[8]||(a[8]=s("i",{class:"fas fa-folder-open"},null,-1)),a[9]||(a[9]=s("p",null,"لم يتم العثور على أي حجوزات مؤكدة لهذا الرقم",-1)),B(m,{to:"/booking-cards",class:"submit-btn"},{default:S(()=>[...a[7]||(a[7]=[s("span",null,"احجز الآن",-1)])]),_:1})])):(o(),l("div",I,[(o(!0),l(T,null,$(e(u),t=>(o(),l("div",{key:t.tracking_code,class:"booking-card"},[s("div",{class:v(["card-status",`status-${t.status_val}`])},i(t.status),3),s("div",P,[s("div",U,[a[10]||(a[10]=s("span",{class:"info-label"},"اسم صاحب الطلب",-1)),s("span",A,i(t.name),1)]),s("div",G,[a[11]||(a[11]=s("span",{class:"info-label"},"نوع الدفع",-1)),s("span",H,i(t.payment_type),1)]),s("div",J,[a[12]||(a[12]=s("span",{class:"info-label"},"رقم التتبع",-1)),s("span",K,i(t.tracking_code),1)]),s("div",Q,[a[13]||(a[13]=s("span",{class:"info-label"},"تاريخ الطلب",-1)),s("span",W,i(t.date),1)])])]))),128)),e(u).some(t=>t.status_val===0)?(o(),l("div",X,[...a[14]||(a[14]=[s("i",{class:"fas fa-exclamation-triangle"},null,-1),s("span",null,"ستصلك رساله قريبة بنتيجة المعامله",-1)])])):f("",!0)]))])):f("",!0)])])}}}),es=q(Y,[["__scopeId","data-v-b6be01da"]]);export{es as default};
